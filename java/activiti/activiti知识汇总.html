<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.38" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="http://www.zhangsj.xyz/blog/java/activiti/activiti%E7%9F%A5%E8%AF%86%E6%B1%87%E6%80%BB.html"><meta property="og:site_name" content="ShijingSpace"><meta property="og:type" content="article"><meta property="og:image" content="http://www.zhangsj.xyz/blog/"><meta property="og:updated_time" content="2022-05-19T10:22:17.000Z"><meta property="og:locale" content="zh-CN"><meta name="twitter:card" content="summary_large_image"><meta property="article:modified_time" content="2022-05-19T10:22:17.000Z"><link rel="stylesheet" href="//at.alicdn.com/t/font_3166858_nfzh5q0te6g.css"><title>ShijingSpace</title><meta name="description" content="Java学习&&面试指南">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/blog/assets/style.49bb0069.css">
    <link rel="modulepreload" href="/blog/assets/app.9da19d67.js"><link rel="modulepreload" href="/blog/assets/activiti知识汇总.html.30ee8589.js"><link rel="modulepreload" href="/blog/assets/activiti知识汇总.html.fe38d6be.js"><link rel="modulepreload" href="/blog/assets/plugin-vue_export-helper.21dcd24c.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc sidebar-open"><!--[--><header class="navbar"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><a href="/blog/" class="home-link"><img class="logo" src="/blog/logo.svg" alt="ShijingSpace"><!----><span class="site-name hide-in-pad">ShijingSpace</span><!--[--><!----><!--]--></a><nav class="nav-links" style=""><div class="nav-item hide-in-mobile"><a href="/blog/" class="nav-link" arialabel="主页"><i class="icon iconfont icon-bloghome"></i>主页<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" arialabel="java"><span class="title"><i class="icon iconfont icon-blogguide"></i>java</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/blog/java/basic" class="nav-link" arialabel="基础"><!---->基础<!----></a></li><li class="dropdown-item"><a href="/blog/java/concurrent" class="nav-link" arialabel="并发"><!---->并发<!----></a></li><li class="dropdown-item"><a href="/blog/java/datasource" class="nav-link" arialabel="数据库"><!---->数据库<!----></a></li><li class="dropdown-item"><a href="/blog/java/design-patterns" class="nav-link" arialabel="设计模式"><!---->设计模式<!----></a></li><li class="dropdown-item"><a href="/blog/java/interview.html" class="nav-link" arialabel="面经"><!---->面经<!----></a></li><li class="dropdown-item"><a href="/blog/java/jvm" class="nav-link" arialabel="JVM"><!---->JVM<!----></a></li><li class="dropdown-item"><a href="/blog/java/message-queue" class="nav-link" arialabel="消息队列"><!---->消息队列<!----></a></li><li class="dropdown-item"><a href="/blog/java/redis" class="nav-link" arialabel="缓存"><!---->缓存<!----></a></li><li class="dropdown-item"><a href="/blog/java/soa" class="nav-link" arialabel="分布式"><!---->分布式<!----></a></li><li class="dropdown-item"><a href="/blog/java/spring" class="nav-link" arialabel="spring"><!---->spring<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" arialabel="其他"><span class="title"><i class="icon iconfont icon-blogguide"></i>其他</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/blog/note" class="nav-link" arialabel="随笔"><!---->随笔<!----></a></li><li class="dropdown-item"><a href="/blog/vue" class="nav-link" arialabel="前端"><!---->前端<!----></a></li><li class="dropdown-item"><a href="/blog/tool" class="nav-link" arialabel="工具"><!---->工具<!----></a></li><li class="dropdown-item"><a href="/blog/algo" class="nav-link" arialabel="算法"><!---->算法<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" arialabel="工具"><span class="title"><i class="icon iconfont icon-blogtool"></i>工具</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/blog/tool/idea-plugin.html" class="nav-link" arialabel="idea"><!---->idea<!----></a></li><li class="dropdown-item"><a href="/blog/tool/vscode-plugins-and-configuration.html" class="nav-link" arialabel="vscode"><!---->vscode<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="https://blog.csdn.net/qq_43183527" rel="noopener noreferrer" target="_blank" arialabel="博客" class="nav-link"><i class="icon iconfont icon-blogblog"></i>博客<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="nav-item hide-in-mobile"><a href="/blog/about" class="nav-link" arialabel="关于作者"><i class="icon iconfont icon-blogguide"></i>关于作者<!----></a></div></nav><div class="nav-actions-wrapper"><!--[--><!----><!--]--><div class="nav-item"><!----></div><div class="nav-item"><a class="repo-link" href="https://github.com/coderzsj/blog" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" arialabelledby="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><title id="github" lang="en">github icon</title><g fill="currentColor"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></g></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewbox="0 0 1024 1024" arialabelledby="auto" style="display:block;"><title id="auto" lang="en">auto icon</title><g fill="currentColor"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></g></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewbox="0 0 1024 1024" arialabelledby="dark" style="display:none;"><title id="dark" lang="en">dark icon</title><g fill="currentColor"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></g></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewbox="0 0 1024 1024" arialabelledby="light" style="display:none;"><title id="light" lang="en">light icon</title><g fill="currentColor"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></g></svg></button></div><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button><!--[--><!----><!--]--></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/blog/java/" class="nav-link sidebar-link sidebar-page" arialabel="java"><i class="icon iconfont icon-blogmulu"></i>java<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><i class="icon iconfont icon-blogbasic"></i><span class="title">基础</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/blog/java/basic/java-exception.html" class="nav-link sidebar-link sidebar-page" arialabel="java异常"><i class="icon iconfont icon-blogexception"></i>java异常<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/java/basic/hashmap.html" class="nav-link sidebar-link sidebar-page" arialabel="hashMap知识点汇总"><i class="icon iconfont icon-bloghashmap"></i>hashMap知识点汇总<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/java/basic/still-using-SimpleDateFormat.html" class="nav-link sidebar-link sidebar-page" arialabel="仍在使用SimpleDateFormat？"><!---->仍在使用SimpleDateFormat？<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><!----><span class="title">设计模式</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/blog/java/design-patterns/let-me-tell-you-what-design-patterns-are-used-in-spring.html" class="nav-link sidebar-link sidebar-page" arialabel="spring中涉及到九种设计模式"><!---->spring中涉及到九种设计模式<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/java/design-patterns/singleton-design.html" class="nav-link sidebar-link sidebar-page" arialabel="Java设计模式--单例模式！"><!---->Java设计模式--单例模式！<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/java/design-patterns/six-principles-of-design-patterns.html" class="nav-link sidebar-link sidebar-page" arialabel="设计模式遵循的一些原则"><!---->设计模式遵循的一些原则<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><i class="icon iconfont icon-blogredis"></i><span class="title">缓存</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/blog/java/redis/redis.html" class="nav-link sidebar-link sidebar-page" arialabel="Redis调优"><!---->Redis调优<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/java/redis/interview.html" class="nav-link sidebar-link sidebar-page" arialabel="Redis知识点汇总"><i class="icon iconfont icon-bloginterview"></i>Redis知识点汇总<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><i class="icon iconfont icon-blogbingfazheng"></i><span class="title">并发编程</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/blog/java/concurrent/synchronized-principle-analysis-and-optimization.html" class="nav-link sidebar-link sidebar-page" arialabel="synchronized"><!---->synchronized<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/java/concurrent/thread-life-cycle.html" class="nav-link sidebar-link sidebar-page" arialabel="线程生命周期"><!---->线程生命周期<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/java/concurrent/4-reference-types.html" class="nav-link sidebar-link sidebar-page" arialabel="四种引用类型"><!---->四种引用类型<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/java/concurrent/aqs-source-code-reading-notes.html" class="nav-link sidebar-link sidebar-page" arialabel="AQS"><!---->AQS<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/java/concurrent/threadpool-code-analysis.html" class="nav-link sidebar-link sidebar-page" arialabel="线程池分析"><!---->线程池分析<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/java/concurrent/threadlocal.html" class="nav-link sidebar-link sidebar-page" arialabel="ThreadLocal的介绍与使用"><!---->ThreadLocal的介绍与使用<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><i class="icon iconfont icon-blogbxl-spring-boot"></i><span class="title">spring</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/blog/java/spring/spring.html" class="nav-link sidebar-link sidebar-page" arialabel="Spring MVC 运行及启动流程"><i class="icon iconfont icon-blogbxl-spring-boot"></i>Spring MVC 运行及启动流程<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/java/spring/springboot-startup-process.html" class="nav-link sidebar-link sidebar-page" arialabel="springboot自动装配原理"><i class="icon iconfont icon-blogzidong-02"></i>springboot自动装配原理<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/java/spring/spring-transaction.html" class="nav-link sidebar-link sidebar-page" arialabel="spring事务"><i class="icon iconfont icon-blogguanli"></i>spring事务<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/java/spring/@RequestBody&amp;ResponseBody.html" class="nav-link sidebar-link sidebar-page" arialabel="请求正文&amp;响应正文"><i class="icon iconfont icon-blogannotation"></i>请求正文&amp;响应正文<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><i class="icon iconfont icon-blogmqxiaoxiduilieMQ"></i><span class="title">消息队列</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/blog/java/message-queue/kafka.html" class="nav-link sidebar-link sidebar-page" arialabel="kafka概念，使用，架构"><!---->kafka概念，使用，架构<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/java/message-queue/rabbit.html" class="nav-link sidebar-link sidebar-page" arialabel="RabbitMQ知识点总结"><!---->RabbitMQ知识点总结<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><i class="icon iconfont icon-blogdatasource"></i><span class="title">数据库</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/blog/java/datasource/detailed-explanation-of-b-tree-and-b+-tree.html" class="nav-link sidebar-link sidebar-page" arialabel="b-tree和b+tree的详细解释"><i class="icon iconfont icon-blogtree"></i>b-tree和b+tree的详细解释<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/java/datasource/mysql-tuning.html" class="nav-link sidebar-link sidebar-page" arialabel="sql优化"><i class="icon iconfont icon-blogyouhuayunhang"></i>sql优化<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/java/datasource/mysql-transaction.html" class="nav-link sidebar-link sidebar-page" arialabel="MySQL事务"><i class="icon iconfont icon-blogshiwu"></i>MySQL事务<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/java/datasource/storage-engine.html" class="nav-link sidebar-link sidebar-page" arialabel="dataource"><!---->dataource<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/java/datasource/explain-execution-plan.html" class="nav-link sidebar-link sidebar-page" arialabel="explain执行计划"><!---->explain执行计划<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><i class="icon iconfont icon-blogfenbushi"></i><span class="title">分布式</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/blog/java/soa/dubbo.html" class="nav-link sidebar-link sidebar-page" arialabel="dubbo知识点总结"><i class="icon iconfont icon-blogdubbo"></i>dubbo知识点总结<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/java/soa/distributed-transaction.html" class="nav-link sidebar-link sidebar-page" arialabel="分布式事务"><i class="icon iconfont icon-blogfubuhi"></i>分布式事务<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/java/soa/distributed-id.html" class="nav-link sidebar-link sidebar-page" arialabel="分布式 id"><i class="icon iconfont icon-blogid"></i>分布式 id<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/java/soa/Zookeeper.html" class="nav-link sidebar-link sidebar-page" arialabel="ZooKeeper"><i class="icon iconfont icon-blogZooKeeper"></i>ZooKeeper<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/java/soa/spring-cloud.html" class="nav-link sidebar-link sidebar-page" arialabel="spring cloud笔记"><i class="icon iconfont icon-blogcloud"></i>spring cloud笔记<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/java/soa/take-you-step-by-step-to-understand-the-jwt.html" class="nav-link sidebar-link sidebar-page" arialabel="前后端分离利器之JWT"><!---->前后端分离利器之JWT<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><i class="icon iconfont icon-blogxuniji"></i><span class="title">虚拟机</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/blog/java/jvm/jvm-tuning.html" class="nav-link sidebar-link sidebar-page" arialabel="jvm调优"><i class="icon iconfont icon-blogyouhuayunhang"></i>jvm调优<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/java/jvm/jvm-memory-structure.html" class="nav-link sidebar-link sidebar-page" arialabel="JVM内存结构"><!---->JVM内存结构<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/java/jvm/jvm-garbage-collection.html" class="nav-link sidebar-link sidebar-page" arialabel="jvm-gc"><!---->jvm-gc<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/java/jvm/jvm-class-loading&amp;bytecode-technology.html" class="nav-link sidebar-link sidebar-page" arialabel="JVM类加载与字节码技术&amp;内存模型"><!---->JVM类加载与字节码技术&amp;内存模型<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!----></h1><div class="article-info"><span class="author-info" arialabel="作者🖊" isoriginal="false" pageview="false" color="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" arialabelledby="author"><title id="author" lang="en">author icon</title><g fill="currentColor"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></g></svg><span><span class="author-item">shijing</span></span><span property="author" content="shijing"></span></span><!----><span class="date-info" arialabel="写作日期📅" isoriginal="false" pageview="false" color="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" arialabelledby="calendar"><title id="calendar" lang="en">calendar icon</title><g fill="currentColor"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></g></svg><span>2022年5月19日</span><meta property="datePublished" content="2022-05-19T10:22:17.000Z"></span><!----><!----><span class="reading-time-info" arialabel="阅读时间⌛" isoriginal="false" pageview="false" color="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" arialabelledby="timer"><title id="timer" lang="en">timer icon</title><g fill="currentColor"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></g></svg><span>大约 25 分钟</span><meta property="timeRequired" content="PT25M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc-list"><div class="toc-header">此页内容</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/java/activiti/activiti%E7%9F%A5%E8%AF%86%E6%B1%87%E6%80%BB.html#库表结构含义" class="router-link-active router-link-exact-active toc-link level2">库表结构含义</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/java/activiti/activiti%E7%9F%A5%E8%AF%86%E6%B1%87%E6%80%BB.html#一、通用数据表-act-ge" class="router-link-active router-link-exact-active toc-link level3">一、通用数据表(act_ge_*)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/java/activiti/activiti%E7%9F%A5%E8%AF%86%E6%B1%87%E6%80%BB.html#二、流程存储数数据表-act-re" class="router-link-active router-link-exact-active toc-link level3">二、流程存储数数据表（act_re_*）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/java/activiti/activiti%E7%9F%A5%E8%AF%86%E6%B1%87%E6%80%BB.html#三、用户数据表-act-id" class="router-link-active router-link-exact-active toc-link level3">三、用户数据表（act_id_*）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/java/activiti/activiti%E7%9F%A5%E8%AF%86%E6%B1%87%E6%80%BB.html#四、运行时数据表-act-ru" class="router-link-active router-link-exact-active toc-link level3">四、运行时数据表（act_ru_*）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/java/activiti/activiti%E7%9F%A5%E8%AF%86%E6%B1%87%E6%80%BB.html#五、历史数据表-act-hi" class="router-link-active router-link-exact-active toc-link level3">五、历史数据表（act_hi_*）</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/java/activiti/activiti%E7%9F%A5%E8%AF%86%E6%B1%87%E6%80%BB.html#常用api" class="router-link-active router-link-exact-active toc-link level2">常用api</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/java/activiti/activiti%E7%9F%A5%E8%AF%86%E6%B1%87%E6%80%BB.html#普通请假全流程演示" class="router-link-active router-link-exact-active toc-link level2">普通请假全流程演示</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/java/activiti/activiti%E7%9F%A5%E8%AF%86%E6%B1%87%E6%80%BB.html#手写流程和activiti对比" class="router-link-active router-link-exact-active toc-link level2">手写流程和activiti对比</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/java/activiti/activiti%E7%9F%A5%E8%AF%86%E6%B1%87%E6%80%BB.html#手写流程代码" class="router-link-active router-link-exact-active toc-link level3">手写流程代码</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/java/activiti/activiti%E7%9F%A5%E8%AF%86%E6%B1%87%E6%80%BB.html#activiti框架" class="router-link-active router-link-exact-active toc-link level3">activiti框架</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/java/activiti/activiti%E7%9F%A5%E8%AF%86%E6%B1%87%E6%80%BB.html#若依" class="router-link-active router-link-exact-active toc-link level2">若依</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/java/activiti/activiti%E7%9F%A5%E8%AF%86%E6%B1%87%E6%80%BB.html#_2、任务撤回" class="router-link-active router-link-exact-active toc-link level3">2、任务撤回</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><!--[--><h2 id="库表结构含义" tabindex="-1"><a class="header-anchor" href="#库表结构含义" aria-hidden="true">#</a> 库表结构含义</h2><h3 id="一、通用数据表-act-ge" tabindex="-1"><a class="header-anchor" href="#一、通用数据表-act-ge" aria-hidden="true">#</a> 一、通用数据表(act_ge_*)</h3><p>1.act_ge_bytearray(资源表)</p><p>二进制资源表，用于存储通用的流程定义和流程资源，只要调用了<code>activiti</code>存储服务的API,涉及的资源均会被转换为byte数组保存到这个表中，一般情况用于保存字符串，流程文件 内容，流程图片内容。</p><table><thead><tr><th>字段</th><th>数据类型</th><th>描述</th></tr></thead><tbody><tr><td>ID_</td><td>varchar(64)</td><td>主键ID</td></tr><tr><td>REV_</td><td>int(11)</td><td>数据版本，用于记录该数据被操作的次数</td></tr><tr><td>NAME_</td><td>varchar(255)</td><td>部署资源文件的名称</td></tr><tr><td>DEPLOYMENT_ID_</td><td>varchar（64）</td><td>一次可以添件多个资源，该字段与部署表act_re_deployment的主键关联</td></tr><tr><td>BYTES_</td><td>longblob</td><td>存储的资源内容（部署的文件）</td></tr><tr><td>GENERATED_</td><td>tinyint</td><td>该资源是否是activiti引擎自动生成（0表示用户生成，1表示由activiti引擎生成）</td></tr></tbody></table><p>2.act_get_property(属性数据表)</p><p>系统相关的属性，存储整个流程引擎级别的数据，初始化表结构时会默认，插入三条记录。</p><table><thead><tr><th>字段</th><th>数据类型</th><th>描述</th></tr></thead><tbody><tr><td>NAME_</td><td>varchar(64)</td><td>属性的名称</td></tr><tr><td>VALUE_</td><td>varchar(300)</td><td>属性的值</td></tr><tr><td>REV_</td><td>int</td><td>数据的版本号</td></tr></tbody></table><h3 id="二、流程存储数数据表-act-re" tabindex="-1"><a class="header-anchor" href="#二、流程存储数数据表-act-re" aria-hidden="true">#</a> 二、流程存储数数据表（act_re_*）</h3><p>1.act_re_deployment(部署数据信息表)</p><p>部署流程定义时需要被持久化保留的信息</p><table><thead><tr><th>字段</th><th>数据类型</th><th>描述</th></tr></thead><tbody><tr><td>ID_</td><td>varchar(64)</td><td></td></tr><tr><td>NAME_</td><td>varchar(255)</td><td>部署名称</td></tr><tr><td>CATEGORY_</td><td>varchar(255)</td><td>类别</td></tr><tr><td>KEY_</td><td>varchar(255)</td><td>关键字</td></tr><tr><td>TENANT_ID_</td><td>varchar(255)</td><td>租户</td></tr><tr><td>DEPLOY_TIME</td><td>timestamp</td><td>部署时间</td></tr><tr><td>ENIGIN_VERSION_</td><td>varchar(255)</td><td>引擎版本号</td></tr></tbody></table><p>2.act_re_procdef(流程定义数据表)</p><p>activiti在资源部署时，将部署的流程文件进行解析，形成特定的流程定义数据，写入到流程定义表中。</p><table><thead><tr><th>字段</th><th>数据类型</th><th>描述</th></tr></thead><tbody><tr><td>ID_</td><td>varchar(64)</td><td>主键ID</td></tr><tr><td>REV_</td><td>int(11)</td><td>数据版本，用于记录该数据被操作的次数</td></tr><tr><td>CATEGORY_</td><td>varchar(255)</td><td>分类：流程定义的Namespace就是类别</td></tr><tr><td>NAME_</td><td>varchar(255)</td><td>流程名称</td></tr><tr><td>KEY_</td><td>varchar(255)</td><td>流程编号（该编号就是流程文件process元素的id属性值）</td></tr><tr><td>VERSION_</td><td>int(11)</td><td>流程版本号（新建为1，随修改次数递增1）</td></tr><tr><td>DEPLOYMENT_ID_</td><td>varchar(64)</td><td>部署表（act_re_deployment）ID</td></tr><tr><td>RESOURCE_NAME_</td><td>varchar(4000)</td><td>流程图bpmn的文件名称</td></tr><tr><td>DGRM_RESOURCE_NAME_</td><td>varchar(4000)</td><td>图片资源文件名称（一般为png）</td></tr><tr><td>DESCRIPTION_</td><td>varchar(4000)</td><td>流程定义的描述信息</td></tr><tr><td>HAS_START_FORM_KEY_</td><td>tinyint(4)</td><td>流程文件是否有开始表单（start节点是否存在formKey 0否 1是）</td></tr><tr><td>HAS_GRAPHICAL_NOTATION_</td><td>tinyint(4)</td><td></td></tr><tr><td>SUSPENSION_STATE_</td><td>int(11)</td><td>是否挂起（1激活，2挂起）表示流程定义的状态是激活还是中止，激活状态时该字段值为1，中止时字段值为2，如果流程定义被设置为中止状态，那么将不能启动流程。</td></tr><tr><td>TENANT_ID_</td><td>varchar(255)</td><td>租户ID</td></tr><tr><td>ENGINE_VERSION_</td><td>varchar(255)</td><td>引擎的版本号</td></tr></tbody></table><p>3.act_re_model(流程设计模型部署表)</p><p>创建流程的设计模型是，保存在该数据表中</p><table><thead><tr><th>字段</th><th>数据类型</th><th>描述</th></tr></thead><tbody><tr><td>ID_</td><td>varchar(64)</td><td>主键ID</td></tr><tr><td>REV_</td><td>int(11)</td><td>数据版本，用于记录该数据被操作的次数</td></tr><tr><td>NAME_</td><td>varchar(255)</td><td>模型名称</td></tr><tr><td>KEY_</td><td>varchar(255)</td><td>模型关键字</td></tr><tr><td>CATEGORY_</td><td>varchar(255)</td><td>类型，用户自己对流程模型的分类</td></tr><tr><td>CREATE_TIME_</td><td>timestamp</td><td>模型的创建时间</td></tr><tr><td>LAST_UPDATE_TIME</td><td>timestamp</td><td>最后修改的时间</td></tr><tr><td>VERSION_</td><td>int(11)</td><td>模型版本号（新建为1，随修改次数递增1）</td></tr><tr><td>META_INFO_</td><td>varchar(4000)</td><td>数据源信息（以json的形式保存流程定义的信息）</td></tr><tr><td>DEPLOYMENT_ID_</td><td>varchar(64)</td><td>部署表（act_re_deployment）ID</td></tr><tr><td>EDITOR_SOURCE_VALUE_ID_</td><td>varchar(64)</td><td>编辑源值 ID</td></tr><tr><td>EDITOR_SOURCE_EXTRA_VALUE_ID_</td><td>varchar(64)</td><td>编辑员扩展值ID</td></tr><tr><td>TENANT_ID_</td><td>varchar(255)</td><td>租户ID</td></tr></tbody></table><h3 id="三、用户数据表-act-id" tabindex="-1"><a class="header-anchor" href="#三、用户数据表-act-id" aria-hidden="true">#</a> 三、用户数据表（act_id_*）</h3><p>1.act_id_user(用户信息表)</p><p>流程引擎的用户信息被保存在act_id_user表中</p><table><thead><tr><th>字段</th><th>数据类型</th><th>描述</th></tr></thead><tbody><tr><td>ID_</td><td>varchar(64)</td><td>主键ID</td></tr><tr><td>REV_</td><td>int(11)</td><td>数据版本号</td></tr><tr><td>FIRST_</td><td>varchar(255)</td><td>用户名称</td></tr><tr><td>LAST_</td><td>varchar(255)</td><td>用户姓氏</td></tr><tr><td>EMAIL_</td><td>varchar(255)</td><td>用户邮箱</td></tr><tr><td>PWD_</td><td>varchar(255)</td><td>用户密码</td></tr><tr><td>PICTURE_ID_</td><td>varchar(64)</td><td>用户头像图片，对应资源表的数据ID</td></tr></tbody></table><p>2.act_id_info（用户扩展信息表）</p><p>Activiti将用户、用户账号和用户信息分为三种数据，其中用户表保存用户的数据，而用户账号和用户信息，则被保存到act_id_info表中。</p><table><thead><tr><th>字段</th><th>数据类型</th><th>描述</th></tr></thead><tbody><tr><td>ID_</td><td>varchar(64)</td><td>主键ID</td></tr><tr><td>REV_</td><td>int(11)</td><td>版本号</td></tr><tr><td>USER_ID_</td><td>varchar(64)</td><td>对应用户表的数据ID，但没有强制做外键关联。</td></tr><tr><td>TYPE_</td><td>varchar(64)</td><td>信息类型，当前可以设置用户账号(account)、用户信息(userinfo)和NULL三种值。</td></tr><tr><td>KEY_</td><td>varchar(255)</td><td>数据的键，可以根据该键来查找用户信息的值。</td></tr><tr><td>VALUE_</td><td>varchar(255)</td><td>数据的值</td></tr><tr><td>PASSWORD_</td><td>longblob</td><td>用户账号密码字段</td></tr><tr><td>PARENT_ID_</td><td>varchar(255)</td><td>该信息的父信息ID，如果一条数据设置了父信息ID，则表示该数据时用户账号（信息）的明细数据。</td></tr></tbody></table><p>3.act_id_group(用户组信息表)</p><p>保存用户组的信息</p><table><thead><tr><th>字段</th><th>数据类型</th><th>描述</th></tr></thead><tbody><tr><td>ID_</td><td>varchar(64)</td><td>主键ID</td></tr><tr><td>REV_</td><td>int(11)</td><td>版本号</td></tr><tr><td>NAME_</td><td>varchar(255)</td><td>用户组名字</td></tr><tr><td>TYPE_</td><td>varchar(255)</td><td>用户组类型</td></tr></tbody></table><p>4.act_id_membership(用户与用户组关系表)</p><p>一个用户组下有多个用户，一个用户可以属于不同的用户组，那么这种多对多的关系，就使用关系表来进行描述，关系表为act_id_membership。</p><table><thead><tr><th>字段</th><th>数据类型</th><th>描述</th></tr></thead><tbody><tr><td>USER_ID_</td><td>varchar(64)</td><td>用户表的主键ID</td></tr><tr><td>GROUP_ID_</td><td>varchar(64)</td><td>用户组信息表主键ID</td></tr></tbody></table><h3 id="四、运行时数据表-act-ru" tabindex="-1"><a class="header-anchor" href="#四、运行时数据表-act-ru" aria-hidden="true">#</a> 四、运行时数据表（act_ru_*）</h3><p>1.act_ru_execution（流程实例表）</p><p>流程启动后，会产生一个流程实例，同时会产生相应的执行流，流程实例和执行流数据均被保存在act_ru_execution表中，如果一个流程实例只有一条执行流，那么该表中只产生一条数据，该数据既表示执行流，也表示流程实例。</p><table><thead><tr><th>字段</th><th>数据类型</th><th>描述</th></tr></thead><tbody><tr><td>ID_</td><td>varchar（64）</td><td>主键ID</td></tr><tr><td>REV_</td><td>int(11)</td><td>版本号</td></tr><tr><td>PROC_INST_ID_</td><td>varchar(64)</td><td>流程实例ID</td></tr><tr><td>BUSINESS_KEY_</td><td>varchar(255)</td><td>一个流程实例有可能会产生多个执行流，该字段表示执行流所属的流程实例启动流程时指定的业务主键。(一般存业务表主键)</td></tr><tr><td>PARENT_ID_</td><td>varchar(64)</td><td>父流程实例ID，一个流程实例有可能会产生执行流，新的执行流数据以该字段标识其所属的流程实例。</td></tr><tr><td>PROC_DEF_ID_</td><td>varchar(64)</td><td>流程定义的ID</td></tr><tr><td>SUPER_EXEC_</td><td>varchar(64)</td><td>外部子流程</td></tr><tr><td>ROOT_PROC_INST_ID_</td><td>varchar(64)</td><td></td></tr><tr><td>ACT_ID_</td><td>varchar(255)</td><td>当前执行流程ID，ID在流程文件中定义</td></tr><tr><td>IS_ACTIVE_</td><td>tinyint(4)</td><td>是否处于激活状态（0否，1是）</td></tr><tr><td>IS_CONCURRENT_</td><td>tinyint(4)</td><td>是否处于并发状态（0否，1是）</td></tr><tr><td>IS_SCOPE_</td><td>tinyint(4)</td><td>是否是主流程实例（0否，1是）</td></tr><tr><td>IS_EVENT_SCOPE_</td><td>tinyint(4)</td><td>是否是事件（0否，1是）</td></tr><tr><td>IS_MI_ROOT_</td><td>tinyint(4)</td><td></td></tr><tr><td>SUSPENSION_STATE_</td><td>int(11)</td><td>挂起状态（1正常,2挂起）</td></tr><tr><td>CACHED_ENT_STATE_</td><td>int(11)</td><td>流程实体的缓冲，取值为0~7</td></tr><tr><td>TENANT_ID_</td><td>varchar(255)</td><td>租户ID</td></tr><tr><td>NAME_</td><td>varchar(255)</td><td>名称</td></tr><tr><td>START_TIME_</td><td>datetime</td><td>启动时间</td></tr><tr><td>START_USER_ID_</td><td>varchar(255)</td><td>启动用户</td></tr><tr><td>LOCK_TIME_</td><td>timestamp</td><td>锁定时间</td></tr><tr><td>IS_COUNT_ENABLED_</td><td>tinyint(4)</td><td></td></tr><tr><td>EVT_SUBSCR_COUNT_</td><td>int(11)</td><td></td></tr><tr><td>TASK_COUNT_</td><td>int(11)</td><td></td></tr><tr><td>JOB_COUNT_</td><td>int(11)</td><td></td></tr><tr><td>TIMER_JOB_COUNT_</td><td>int(11)</td><td></td></tr><tr><td>SUSP_JOB_COUNT_</td><td>int(11)</td><td></td></tr><tr><td>DEADLETTER_JOB_COUNT_</td><td>int(11)</td><td></td></tr><tr><td>VAR_COUNT_</td><td>int(11)</td><td></td></tr><tr><td>ID_LINK_COUNT_</td><td>int(11)</td><td></td></tr></tbody></table><p>2.act_ru_task（流程任务表）</p><p>流程在运行过程中所产生的任务数据保存在act_ru_task表中</p><table><thead><tr><th>字段</th><th>数据类型</th><th>描述</th></tr></thead><tbody><tr><td>ID_</td><td>varchar(64)</td><td>主键ID</td></tr><tr><td>REV_</td><td>int(11)</td><td>数据版本号</td></tr><tr><td>EXECUTION_ID_</td><td>varchar(64)</td><td>执行实例ID</td></tr><tr><td>PROC_INST_ID_</td><td>varchar(64)</td><td>流程实例ID</td></tr><tr><td>PROC_DEF_ID_</td><td>varchar(64)</td><td>流程定义ID（act_re_procdef）</td></tr><tr><td>NAME_</td><td>varchar(255)</td><td>流程任务名称</td></tr><tr><td>PARENT_TASK_ID_</td><td>varchar(64)</td><td>父节点任务ID</td></tr><tr><td>DESCRIPTION_</td><td>varchar(4000)</td><td>任务描述</td></tr><tr><td>TASK_DEF_KEY_</td><td>varchar(255)</td><td>任务定义的key（任务定义的ID）</td></tr><tr><td>OWNER_</td><td>varchar(255)</td><td>所属人（一般情况下为空，只有在委托时才有值）</td></tr><tr><td>ASSIGNEE_</td><td>varchar(255)</td><td>代理人员（签收人或委托人）</td></tr><tr><td>DELEGATION_</td><td>varchar(64)</td><td>代理团（委托类型，分为两种：PENDING，RESOLVED。如无委托则为空）</td></tr><tr><td>PRIORITY_</td><td>int(11)</td><td>优先权（优先级别，默认为：50）</td></tr><tr><td>CREATE_TIME_</td><td>timestamp</td><td>创建时间</td></tr><tr><td>DUE_DATE_</td><td>datetime</td><td>任务预定日期</td></tr><tr><td>CATEGORY_</td><td>varchar(255)</td><td>类型</td></tr><tr><td>SUSPENSION_STATE_</td><td>int(11)</td><td>暂停状态（1代表激活，2代表挂起）</td></tr><tr><td>TENANT_ID_</td><td>varchar(255)</td><td>租户ID</td></tr><tr><td>FORM_KEY_</td><td>varchar(255)</td><td>表单ID</td></tr><tr><td>CLAIM_TIME_</td><td>datetime</td><td>签收时间</td></tr></tbody></table><p>3.act_ru_variable(流程参数表)</p><p>存放流程中的参数，这类参数包括流程实例参数、执行流参数和任务参数，参数有可能会有多种类型，因此该表使用多个字段来存放参数值。</p><table><thead><tr><th>字段</th><th>数据类型</th><th>描述</th></tr></thead><tbody><tr><td>ID_</td><td>varchar(64)</td><td>主键ID</td></tr><tr><td>REV_</td><td>int(11)</td><td>数据版本</td></tr><tr><td>TYPE_</td><td>varchar(255)</td><td>参数类型,不为空可选值：boolean. bytes、serializable. date. double、 integer、jpa-entity、long、 null、 short 、string 以上字段值由Activiti 提供，也可自定义扩展类型</td></tr><tr><td>NAME_</td><td>varchar(255)</td><td>参数名称</td></tr><tr><td>EXECUTION_ID_</td><td>varchar(64)</td><td>参数的执行ID</td></tr><tr><td>PROC_INST_ID_</td><td>varchar(64)</td><td>参数对应的流程实例ID</td></tr><tr><td>TASK_ID_</td><td>varchar(64) 任务ID</td><td>（若是任务参数则需要设置）</td></tr><tr><td>BYTEARRAY_ID_</td><td>varchar(64)</td><td>资源表（act_ge_bytearray）ID(若参数值是序列化对象，可将该对象作为资源保存到资源表中）</td></tr><tr><td>DOUBLE_</td><td>double</td><td>参数类型为double,则值会保存到该字段中</td></tr><tr><td>LONG_</td><td>bigint(20)</td><td>参数类型为long, 则值会保存到该字段中。</td></tr><tr><td>TEXT_</td><td>varchar(4000)</td><td>用于保存文本类型的参数值。</td></tr><tr><td>TEXT2_</td><td>varchar(4000)</td><td>与TEXT_字段一样，用于保存文本类型的参数值</td></tr></tbody></table><p>4.act_ru_identitylink（流程与身份关系表）</p><p>用户或者用户组与流程数据之间的关系，使用act_ru_identitylink来保存。</p><table><thead><tr><th>字段</th><th>数据类型</th><th>描述</th></tr></thead><tbody><tr><td>ID_</td><td>varchar(64)</td><td>主键ID</td></tr><tr><td>REV_</td><td>int(11)</td><td>数据版本号</td></tr><tr><td>GROUP_ID_</td><td>varchar(255)</td><td>该关系数据中的用户组ID</td></tr><tr><td>TYPE_</td><td>varchar(255)</td><td>用户组类型（受让人,候选人,所有者,起动器,参与者）</td></tr><tr><td>USER_ID_</td><td>varchar(255)</td><td>用户ID</td></tr><tr><td>TASK_ID_</td><td>varchar(64)</td><td>任务ID</td></tr><tr><td>PROC_INST_ID_</td><td>varchar(64)</td><td>流程实例ID</td></tr><tr><td>PROC_DEF_ID_</td><td>varchar(64)</td><td>流程定义ID</td></tr></tbody></table><p>5.act_ru_job(运行中的任务)</p><p>运行时定时任务数据表</p><table><thead><tr><th>字段</th><th>数据类型</th><th>描述</th></tr></thead><tbody><tr><td>ID_</td><td>varchar(64)</td><td>主键ID</td></tr><tr><td>REV_</td><td>int(11)</td><td>数据版本</td></tr><tr><td>TYPE_</td><td>varchar(255)</td><td>类型，值为message或timer</td></tr><tr><td>LOCK_EXP_TIME_</td><td>timestamp</td><td>锁定的结束时间</td></tr><tr><td>LOCK_OWNER_</td><td>varchar(255)</td><td>挂起者，锁定标识，默认为UUID</td></tr><tr><td>EXCLUSIVE_</td><td>tinyint（1）</td><td>是否唯一</td></tr><tr><td>EXECUTION_ID_</td><td>varchar(64)</td><td>执行实例ID</td></tr><tr><td>PROCESS_INSTANCE_ID_</td><td>varchar(64)</td><td>流程实例ID</td></tr><tr><td>PROC_DEF_ID_</td><td>varchar(64)</td><td>流程定义ID</td></tr><tr><td>RETRIES_</td><td>int(11)</td><td>工作的剩余执行次数，默认值为3</td></tr><tr><td>EXCEPTION_STACK_ID_</td><td>varchar(64)</td><td>异常堆栈（资源表ID ）</td></tr><tr><td>EXCEPTION_MSG_</td><td>varchar(4000)</td><td>异常信息</td></tr><tr><td>DUEDATE_</td><td>timestamp</td><td>工作执行时间</td></tr><tr><td>REPEAT_</td><td>varchar(255)</td><td>工作重复执行次数</td></tr><tr><td>HANDLER_TYPE_</td><td>varchar(255)</td><td>处理器类型</td></tr><tr><td>HANDLER_CFG_</td><td>varchar(4000)</td><td>处理器配置</td></tr><tr><td>TENANT_ID_</td><td>varchar(255)</td><td>租户ID</td></tr></tbody></table><p>6.act_rutimer_job(定时器工作表)</p><p>定时器工作表，用于存放定时器工作。</p><table><thead><tr><th>字段</th><th>数据类型</th><th>描述</th></tr></thead><tbody><tr><td>ID_</td><td>varchar(64)</td><td>主键ID</td></tr><tr><td>REV_</td><td>int(11)</td><td>数据版本</td></tr><tr><td>TYPE_</td><td>varchar(255)</td><td>类型，值为message或timer</td></tr><tr><td>LOCK_EXP_TIME_</td><td>timestamp</td><td>锁定的结束时间</td></tr><tr><td>LOCK_OWNER_</td><td>varchar(255)</td><td>挂起者，锁定标识，默认为UUID</td></tr><tr><td>EXCLUSIVE_</td><td>tinyint（1）</td><td>是否唯一</td></tr><tr><td>EXECUTION_ID_</td><td>varchar(64)</td><td>执行实例ID</td></tr><tr><td>PROCESS_INSTANCE_ID_</td><td>varchar(64)</td><td>流程实例ID</td></tr><tr><td>PROC_DEF_ID_</td><td>varchar(64)</td><td>流程定义ID</td></tr><tr><td>RETRIES_</td><td>int(11)</td><td>工作的剩余执行次数，默认值为3</td></tr><tr><td>EXCEPTION_STACK_ID_</td><td>varchar(64)</td><td>异常堆栈（资源表ID）</td></tr><tr><td>EXCEPTION_MSG_</td><td>varchar(4000)</td><td>异常信息</td></tr><tr><td>DUEDATE_</td><td>timestamp</td><td>工作执行时间</td></tr><tr><td>REPEAT_</td><td>varchar(255)</td><td>工作重复执行次数</td></tr><tr><td>HANDLER_TYPE_</td><td>varchar(255)</td><td>处理器类型</td></tr><tr><td>HANDLER_CFG_</td><td>varchar(4000)</td><td>处理器配置</td></tr><tr><td>TENANT_ID_</td><td>varchar(255)</td><td>租户ID</td></tr></tbody></table><p>7.act_ru_suspended_job(中断工作表)</p><p>中断工作表，中断工作产生后，会将工作保存到该表中。</p><table><thead><tr><th>字段</th><th>数据类型</th><th>描述</th></tr></thead><tbody><tr><td>ID_</td><td>varchar(64)</td><td>主键ID</td></tr><tr><td>REV_</td><td>int(11)</td><td>数据版本</td></tr><tr><td>TYPR_</td><td>varchar(255)</td><td>类型，值为message会timer</td></tr><tr><td>EXCLUSIVE_</td><td>tinyint(1)</td><td>是否唯一</td></tr><tr><td>EXECUTION_ID_</td><td>varchar(64)</td><td>执行实例ID</td></tr><tr><td>PROCESS_INSTANCE_ID_</td><td>varchar(64)</td><td>流程实例ID</td></tr><tr><td>PROC_DEF_ID_</td><td>varchar(64)</td><td>流程定义ID</td></tr><tr><td>RETRIES_</td><td>int(11)</td><td>工作的剩余执行次数，默认值为3</td></tr><tr><td>EXCEPTION_STACK_ID_</td><td>varchar(64)</td><td>异常堆栈（资源表ID</td></tr><tr><td>EXCEPTION_MSG_</td><td>varchar(4000)</td><td>异常信息</td></tr><tr><td>DUEDATE_</td><td>timestamp</td><td>工作执行时间</td></tr><tr><td>REPEAT_</td><td>varchar(255)</td><td>工作重复执行次数</td></tr><tr><td>HANDLER_TYPE_</td><td>varchar(255)</td><td>处理器类型</td></tr><tr><td>HANDLER_CFG_</td><td>varchar(4000)</td><td>处理器配置</td></tr><tr><td>TENANT_ID_</td><td>varcahr(255)</td><td>租户ID</td></tr></tbody></table><p>8.act_ru_deadletter_job(无法执行工作表)</p><p>无法执行工作表，用于存放无法执行的工作。</p><table><thead><tr><th>字段</th><th>数据类型</th><th>描述</th></tr></thead><tbody><tr><td>ID_</td><td>varchar(64)</td><td>主键ID</td></tr><tr><td>REV_</td><td>int(11)</td><td>数据版本</td></tr><tr><td>TYPR_</td><td>varchar(255)</td><td>类型， 值为message会timer</td></tr><tr><td>EXCLUSIVE_</td><td>tinyint(1)</td><td>是否唯一</td></tr><tr><td>EXECUTION_ID_</td><td>varchar(64)</td><td>执行实例ID</td></tr><tr><td>PROCESS_INSTANCE_ID_</td><td>varchar(64)</td><td>流程实例ID</td></tr><tr><td>PROC_DEF_ID_</td><td>varchar(64)</td><td>流程定义ID</td></tr><tr><td>EXCEPTION_STACK_ID_</td><td>varchar(64)</td><td>异常堆栈（ 资源表ID)</td></tr><tr><td>EXCEPTION_MSG_</td><td>varchar(4000)</td><td>异常信息</td></tr><tr><td>DUEDATE_</td><td>timestamp</td><td>工作执行时间</td></tr><tr><td>REPEAT_</td><td>varchar(255)</td><td>工作重复执行次数</td></tr><tr><td>HANDLER_TYPE_</td><td>varchar(255)</td><td>处理器类型</td></tr><tr><td>HANDLER_CFG_</td><td>varchar(4000)</td><td>处理器配置</td></tr><tr><td>TENANT_ID_</td><td>varcahr(255)</td><td>租户ID</td></tr></tbody></table><p>9.act_ru_event_subscr(运行时事件表)</p><p>如果流程到达某类事件节点，Activiti会往act_ru_event_subscr表中加入事件描述数据，这些事件描述数据将会决定流程事件的触发。</p><table><thead><tr><th>字段</th><th>数据类型</th><th>描述</th></tr></thead><tbody><tr><td>ID_</td><td>varchar(64)</td><td>主键ID</td></tr><tr><td>REV_</td><td>int(11)</td><td>数据版本号</td></tr><tr><td>EVENT_TYPE_</td><td>varchar(255)</td><td>事件类型（message,signal ）</td></tr><tr><td>EVENT_NAME_</td><td>varchar(255)</td><td>事件名称</td></tr><tr><td>EXECUTION_ID_</td><td>varchar(64)</td><td>流程执行ID</td></tr><tr><td>PROC_INST_ID_</td><td>varchar(64)</td><td>流程实例ID</td></tr><tr><td>ACTIVITY_ID_</td><td>varchar(64)</td><td>时间活动ID</td></tr><tr><td>CONFIGURATION_</td><td>varchar(255)</td><td>属性配置ID</td></tr><tr><td>CREATED_</td><td>timestamp</td><td>创建时间</td></tr><tr><td>PROC_DEF_ID_</td><td>varchar(64)</td><td>流程定义ID</td></tr><tr><td>TENANT_ID_</td><td>varchar(255)</td><td>租户ID</td></tr></tbody></table><h3 id="五、历史数据表-act-hi" tabindex="-1"><a class="header-anchor" href="#五、历史数据表-act-hi" aria-hidden="true">#</a> 五、历史数据表（act_hi_*）</h3><p>1.act_hi_procinst(历史流程实例表)</p><p>流程实例的历史数据会保存在act_hi_procinst表中，只要流程被启动，就会将流程实例的数据写入act_hi_procinst表中。除了基本的流程字段外，与运行时数据表不同的是，历史流程实例表还会记录流程的开始活动ID、结束活动ID等信息。</p><table><thead><tr><th>字段</th><th>数据类型</th><th>描述</th></tr></thead><tbody><tr><td>ID_</td><td>varchar（64）</td><td>主键ID</td></tr><tr><td>PROC_INST_ID_</td><td>varchar（64）</td><td>流程实例ID</td></tr><tr><td>BUSINESS_KEY_</td><td>varchar（255）</td><td>业务主键， 业务表单的ID</td></tr><tr><td>PROC_DEF_ID_</td><td>varchar（64）</td><td>流程定义ID</td></tr><tr><td>START_TIME_</td><td>datetime</td><td>开始时间</td></tr><tr><td>END_TIME_</td><td>datetime</td><td>结束时间</td></tr><tr><td>DURATION_</td><td>bigtime</td><td>时长</td></tr><tr><td>START_USER_ID_</td><td>varchar（255</td><td>发起人ID</td></tr><tr><td>START_ACT_ID_</td><td>varchar（255）</td><td>开始节点ID</td></tr><tr><td>END_ACT_ID_</td><td>varchar（255）</td><td>结束节点ID</td></tr><tr><td>SUPER_PROCESS_INSTANCE_ID_</td><td>varchar（64）</td><td>父流程实例ID</td></tr><tr><td>DELETE_REASON_</td><td>varchar（4000）</td><td>删除原因</td></tr><tr><td>TENANT_ID_</td><td>varchar（255）</td><td>租户ID</td></tr><tr><td>NAME_</td><td>varchar（255）</td><td>名称</td></tr></tbody></table><p>2.act_hi_detail(流程明细表)</p><p>记录流程执行过程中的参数或者表单数据，由于在流程执行过程中，会产生大量这类数据，因此默认情况下，Activiti不会保存流程明细数据，除非将流程引擎的历史数据配置为null。</p><table><thead><tr><th>字段</th><th>数据类型</th><th>描述</th></tr></thead><tbody><tr><td>ID_</td><td>varchar(64)</td><td>主键ID</td></tr><tr><td>TYPE_</td><td>varchar(255)</td><td>数据类型： 表单或参数</td></tr><tr><td>PROC_INST_ID_</td><td>varchar(64)</td><td>流程实例ID</td></tr><tr><td>EXECUTION_ID_</td><td>varchar(64)</td><td>执行流程ID</td></tr><tr><td>TASK_ID_</td><td>varchar(64)</td><td>任务实例ID</td></tr><tr><td>ACT_INST_ID_</td><td>varchar(64)</td><td>act_hi_actinst表的ID</td></tr><tr><td>NAME_</td><td>varchar(255)</td><td>名称</td></tr><tr><td>VAR_TYPE_</td><td>varchar(255)</td><td>变量类型</td></tr><tr><td>REV_</td><td>int(11)</td><td>数据版本</td></tr><tr><td>TIME_</td><td>datetime</td><td>创建时间</td></tr><tr><td>BYTEARRAY_ID_</td><td>varchar(64)</td><td>act_ge_bytearray表的ID</td></tr><tr><td>DOUBLE_</td><td>double</td><td>存储double类型的变量</td></tr><tr><td>LONG_</td><td>bigint(20)</td><td>存储long类型变量</td></tr><tr><td>TEXT_</td><td>varchar(4000)</td><td>用于保存文本类型的参数</td></tr><tr><td>TEXT2_</td><td>varchar(4000)</td><td>用于保存文本类型的参数</td></tr></tbody></table><p>3.act_hi_taskinst（历史任务实例表）</p><p>当流程到达某个任务节点时，就会向历史任务表中写入历史任务数据，该表与运行时的任务表类似。</p><table><thead><tr><th>字段</th><th>数据类型</th><th>描述</th></tr></thead><tbody><tr><td>ID_</td><td>varchar(64)</td><td>主键ID</td></tr><tr><td>PROC_DEF_ID_</td><td>varchar(64)</td><td>流程定义ID</td></tr><tr><td>TASK_DEF_KEY_</td><td>varchar(255)</td><td>节点定义ID</td></tr><tr><td>PROC_INST_ID_</td><td>varchar(64)</td><td>流程实例ID</td></tr><tr><td>EXECUTION_ID_</td><td>varchar(64)</td><td>执行实例ID</td></tr><tr><td>NAME_</td><td>varchar(255)</td><td>名称</td></tr><tr><td>PARENT_TASK_ID_</td><td>varchar(64)</td><td>父节点实例ID</td></tr><tr><td>DESCRIPTION_</td><td>varchar(4000)</td><td>任务描述</td></tr><tr><td>OWNER_</td><td>varchar(255)</td><td>实际签收人（默认为空，只有在委托时才有值） 任务的拥有者</td></tr><tr><td>ASSIGNEE_</td><td>varchar(255)</td><td>签收人或被委托（代理人 ）</td></tr><tr><td>START_TIME_</td><td>datetime</td><td>开始时间</td></tr><tr><td>CLAIM_TIME_</td><td>datetime</td><td>提醒时间</td></tr><tr><td>END_TIME_</td><td>datetime</td><td>结束时间</td></tr><tr><td>DURATION_</td><td>bingint(20)</td><td>耗时时长</td></tr><tr><td>DELETE_REASON_</td><td>varchar(4000)</td><td>删除原因</td></tr><tr><td>PRIORITY_</td><td>int(11)</td><td>优先级别</td></tr><tr><td>DUE_DATE_</td><td>datetime 过期时间，</td><td>表明任务应在多长时间内完成</td></tr><tr><td>FORM_KEY_</td><td>varchar(255)</td><td>desinger节点定义的form_key属性</td></tr><tr><td>CATEGORY_</td><td>varchar(255)</td><td>分类</td></tr><tr><td>TENANT_ID_</td><td>varchar(255)</td><td>租户ID</td></tr></tbody></table><p>4.act_hi_actinst(历史节点表)</p><p>历史活动信息。这里记录流程流转过的所有节点，与HI_TASKINST不同的是，taskinst只记录usertask内容</p><table><thead><tr><th>字段</th><th>数据类型</th><th>描述</th></tr></thead><tbody><tr><td>ID_</td><td>varchar(64)</td><td>主键ID</td></tr><tr><td>PROC_DEF_ID_</td><td>varchar(64)</td><td>流程定义ID</td></tr><tr><td>PROC_INST_ID_</td><td>varchar(64)</td><td>流程实例ID</td></tr><tr><td>EXECUTION_ID_</td><td>varchar(64)</td><td>流程执行ID</td></tr><tr><td>ACT_ID_</td><td>varchar(255)</td><td>活动ID（节点定义ID ）</td></tr><tr><td>TASK_ID_</td><td>varchar(64)</td><td>任务ID</td></tr><tr><td>CALL_PROC_INST_ID_</td><td>varchar(64)</td><td>请求流程实例ID（调用外部流程的流程实例ID）</td></tr><tr><td>ACT_NAME_</td><td>varchar(255)</td><td>活动名称</td></tr><tr><td>ACT_TYPE_</td><td>varchar(255)</td><td>活动类型</td></tr><tr><td>ASSIGNEE_</td><td>varchar(255)</td><td>活动指派人员</td></tr><tr><td>START_TIME_</td><td>datetime</td><td>开始时间</td></tr><tr><td>END_TIME_</td><td>datetime</td><td>结束时间</td></tr><tr><td>DURATION_</td><td>bigint(20)</td><td>时长</td></tr><tr><td>DELETE_REASON_</td><td>varchar(4000)</td><td>删除原因</td></tr><tr><td>TENANT_ID_</td><td>varchar(255)</td><td>租户ID</td></tr></tbody></table><p>5.act_hi_attachment（历史附件表）</p><p>使用任务何服务(TaskService)的API，可以添加附件，这些附件的数据将会被保存到act_hi_attachment表中。</p><table><thead><tr><th>字段</th><th>数据类型</th><th>描述</th></tr></thead><tbody><tr><td>ID_</td><td>varchar(64)</td><td>主键ID</td></tr><tr><td>REV_</td><td>int(11)</td><td>数据版本</td></tr><tr><td>USER_ID_</td><td>varchar(255)</td><td>附件对应的用户ID，可以为NULL 。</td></tr><tr><td>NAME_</td><td>varchar(255)</td><td>附件的名称</td></tr><tr><td>DESCRIPTION_</td><td>varchar(4000)</td><td>附件的描述</td></tr><tr><td>TYPE_</td><td>varchar(255)</td><td>附件的类型</td></tr><tr><td>TASK_ID_</td><td>varchar(64)</td><td>任务ID</td></tr><tr><td>PROC_INST_ID_</td><td>varchar(64)</td><td>流程实例ID</td></tr><tr><td>URL_</td><td>varchar(4000)</td><td>连接到该附件的URL</td></tr><tr><td>CONTENT_ID_</td><td>varchar(64)</td><td>附件内容ID附件的内容将会被保存到资源表中， 该字段记录资源数据ID</td></tr><tr><td>TIME_</td><td>datetime</td><td>时间</td></tr></tbody></table><p>6.act_hi_comment（历史审批意见表）</p><p>存放各个节点审批人的信息及审批人给出的意见</p><table><thead><tr><th>字段</th><th>数据类型</th><th>描述</th></tr></thead><tbody><tr><td>ID_</td><td>varchar(64)</td><td>主键ID</td></tr><tr><td>TYPE_</td><td>varchar(255)</td><td>类型：event（事件）comment（意见 ）</td></tr><tr><td>TIME_</td><td>datetime</td><td>填写时间</td></tr><tr><td>USER_ID_</td><td>varchar(255)</td><td>用户ID（填写人）</td></tr><tr><td>TASK_ID_</td><td>varchar(64)</td><td>节点任务ID</td></tr><tr><td>PROC_INST_ID_</td><td>varchar(64)</td><td>流程实例ID</td></tr><tr><td>ACTION_</td><td>varchar(255)</td><td>行为类型（值为下列内容中的一种：AddUserLink、DeleteUserLink、AddGroupLink、DeleteGroupLink、AddComment、AddAttachment、DeleteAttachment ）</td></tr><tr><td>MESSAGE_</td><td>varchar(4000)</td><td>处理意见，例如审批意见</td></tr><tr><td>FULL_MSG_</td><td>longblob</td><td>全部消息</td></tr></tbody></table><p>7.act_hi_varinst(历史变量信息表)</p><p>存放流程实例中产生过的变量数据</p><table><thead><tr><th>字段</th><th>数据类型</th><th>描述</th></tr></thead><tbody><tr><td>ID_</td><td>varchar(64)</td><td>主键ID</td></tr><tr><td>PROC_INST_ID_</td><td>varchar(64)</td><td>流程实例ID</td></tr><tr><td>EXECUTION_ID_</td><td>varchar(64)</td><td>执行实例ID</td></tr><tr><td>TASK_ID_</td><td>varchar(64)</td><td>任务实例ID</td></tr><tr><td>NAME_</td><td>varchar(255)</td><td>参数名称</td></tr><tr><td>VAR_TYPE_</td><td>varchar(100)</td><td>变量类型</td></tr><tr><td>REV_</td><td>int(11)</td><td>数据版本号</td></tr><tr><td>BYTEARRAY_ID_</td><td>varchar(64)</td><td>对应资源表（act_ge_bytearray） 的ID</td></tr><tr><td>DOUBLE_</td><td>double</td><td>从存储double类型的参数</td></tr><tr><td>LONG_</td><td>bigint(20)</td><td>存储long类型参数</td></tr><tr><td>TEXT_</td><td>varchar(4000)</td><td>存储变量值类型为String 如此处存储持久化对象时， 值jpa对象的class</td></tr><tr><td>TEXT2_</td><td>varchar(4000)</td><td>此处存储的是JPA持久化对象时，才会有值。此值为对象ID</td></tr><tr><td>CREATE_TIME_</td><td>datetime</td><td>创建时间</td></tr><tr><td>LAST_UPDATED_TIME_</td><td>datetime</td><td>最后修改时间</td></tr></tbody></table><p>8.act_hi_identitylink(历史流程人员表)</p><p>任务参与者数据表。主要存储历史节点参与者的信息</p><table><thead><tr><th>字段</th><th>数据类型</th><th>描述</th></tr></thead><tbody><tr><td>ID_</td><td>varchar(64)</td><td>主键ID</td></tr><tr><td>GROUP_ID_</td><td>varchar(255)</td><td>用户组ID（用户组表主键）</td></tr><tr><td>TYPE_</td><td>varchar(255)</td><td>用户组类型主要分为：assignee、candidate、owner、starter 、participant</td></tr><tr><td>USER_ID_</td><td>varchar(255)</td><td>用户ID</td></tr><tr><td>TASK_ID_</td><td>varchar(64)</td><td>任务ID</td></tr><tr><td>PROC_INST_ID_</td><td>varchar(64)</td><td>流程实例ID</td></tr></tbody></table><h2 id="常用api" tabindex="-1"><a class="header-anchor" href="#常用api" aria-hidden="true">#</a> 常用api</h2><h2 id="普通请假全流程演示" tabindex="-1"><a class="header-anchor" href="#普通请假全流程演示" aria-hidden="true">#</a> 普通请假全流程演示</h2><ol><li>请假列表</li><li>添加（启动流程）</li><li>编辑</li><li>删除</li><li>提交申请</li><li>我的待办</li><li>申请详情</li><li>审批历史</li><li>进度查看</li><li>审批</li><li>委托</li><li>我的已办</li><li>挂起</li><li>激活</li><li>撤销</li></ol><h2 id="手写流程和activiti对比" tabindex="-1"><a class="header-anchor" href="#手写流程和activiti对比" aria-hidden="true">#</a> 手写流程和activiti对比</h2><h3 id="手写流程代码" tabindex="-1"><a class="header-anchor" href="#手写流程代码" aria-hidden="true">#</a> 手写流程代码</h3><h3 id="activiti框架" tabindex="-1"><a class="header-anchor" href="#activiti框架" aria-hidden="true">#</a> <code>activiti</code>框架</h3><p>流程模型Model</p><p><img src="/blog/assets/activiti知识汇总-1651311046408.3796e3bb.png" alt="activiti和手写流程图区别-activiti框架实现bpmn图" loading="lazy"></p><p>-》部署</p><p>xml文件</p><p>流程定义 Process Definition</p><p>=》启动流程 startProcessByKey</p><p>activiti引擎：ProcessEngine 流程自动化 -&gt; 调用<code>XXXService API</code>-&gt; 查询流程实例、我的待办、我的已办、历史备注......</p><h2 id="若依" tabindex="-1"><a class="header-anchor" href="#若依" aria-hidden="true">#</a> 若依</h2><p>基于springboot的权限管理系统 易读易懂、界面简洁美观。和新技术采用spring、mybatis、shiro没有任何其他重度依赖。直接运行即可用。</p><p>它帮我们实现了管理系统需要的基础功能</p><ol><li>用户管理；</li></ol><h3 id="_2、任务撤回" tabindex="-1"><a class="header-anchor" href="#_2、任务撤回" aria-hidden="true">#</a> 2、任务撤回</h3><p>已执行任务的撤回操作相对来说复杂些，这里先分步骤说下总体思路：</p><ol><li>选择一条已办理任务，根据该任务查询出<code>任务ID=myTaskId</code>和<code>流程实例ID=processInstanceId</code>;</li><li>根据<code>processInstanceId</code>判断当前流程是否已结束或已挂起，流程结束或挂起则无法执行撤回操作；</li><li>根据<code>myTaskId</code>查询选择任务的历史任务实例<code>historicTaskInstance</code>，进而查询出对应历史活动实例<code>historicActivityInstance</code>，最终得到活动标识<code>myActivityId</code>；</li><li>根据活动标识<code>myActivityId</code>获取该任务对应的<code>FlowNode</code>对象<code>myFlowNode</code>；</li><li>查询出该任务节点的所有下一任务节点flowElementList，此处是任务节点Task，排查其它类型活动节点；</li><li>判断flowElementList中是否有代办事项，如果有则可以执行撤回操作，否则表示该任务的所有下一任务都执行完毕，此时不允许再执行撤回操作；</li><li>对下一节点代办任务，同样查询出对应的FlowNode对象flowNode；</li><li>借助<code>FlowNode</code>对象myFlowNode和flowNode，反方向执行一次任务，即从代办任务节点反方向流转到当前任务节点，从而完成了任务撤回操作。</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>famousPro<span class="token punctuation">.</span>process<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl</span><span class="token punctuation">;</span>
 
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span><span class="token punctuation">;</span>
 
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>activiti<span class="token punctuation">.</span>engine<span class="token punctuation">.</span></span><span class="token class-name">FormService</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>activiti<span class="token punctuation">.</span>engine<span class="token punctuation">.</span></span><span class="token class-name">HistoryService</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>activiti<span class="token punctuation">.</span>engine<span class="token punctuation">.</span></span><span class="token class-name">RepositoryService</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>activiti<span class="token punctuation">.</span>engine<span class="token punctuation">.</span></span><span class="token class-name">RuntimeService</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>activiti<span class="token punctuation">.</span>engine<span class="token punctuation">.</span></span><span class="token class-name">TaskService</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>activiti<span class="token punctuation">.</span>engine<span class="token punctuation">.</span>history<span class="token punctuation">.</span></span><span class="token class-name">HistoricActivityInstance</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>activiti<span class="token punctuation">.</span>engine<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span><span class="token class-name">RepositoryServiceImpl</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>activiti<span class="token punctuation">.</span>engine<span class="token punctuation">.</span>impl<span class="token punctuation">.</span>persistence<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">ProcessDefinitionEntity</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>activiti<span class="token punctuation">.</span>engine<span class="token punctuation">.</span>impl<span class="token punctuation">.</span>persistence<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">TaskEntity</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>activiti<span class="token punctuation">.</span>engine<span class="token punctuation">.</span>impl<span class="token punctuation">.</span>pvm<span class="token punctuation">.</span></span><span class="token class-name">PvmTransition</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>activiti<span class="token punctuation">.</span>engine<span class="token punctuation">.</span>impl<span class="token punctuation">.</span>pvm<span class="token punctuation">.</span>process<span class="token punctuation">.</span></span><span class="token class-name">ActivityImpl</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>activiti<span class="token punctuation">.</span>engine<span class="token punctuation">.</span>impl<span class="token punctuation">.</span>pvm<span class="token punctuation">.</span>process<span class="token punctuation">.</span></span><span class="token class-name">ProcessDefinitionImpl</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>activiti<span class="token punctuation">.</span>engine<span class="token punctuation">.</span>impl<span class="token punctuation">.</span>pvm<span class="token punctuation">.</span>process<span class="token punctuation">.</span></span><span class="token class-name">TransitionImpl</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>activiti<span class="token punctuation">.</span>engine<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span></span><span class="token class-name">ProcessInstance</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>activiti<span class="token punctuation">.</span>engine<span class="token punctuation">.</span>task<span class="token punctuation">.</span></span><span class="token class-name">Task</span><span class="token punctuation">;</span>
 
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>famousPro<span class="token punctuation">.</span>common<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span><span class="token class-name">BaseServiceImp</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>famousPro<span class="token punctuation">.</span>common<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">IDGenerator</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>famousPro<span class="token punctuation">.</span>common<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">StringUtil</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>famousPro<span class="token punctuation">.</span>process<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">ProcessCoreService</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>famousPro<span class="token punctuation">.</span>process<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">ProcessOtherService</span><span class="token punctuation">;</span>
 
<span class="token doc-comment comment">/**
 * 流程操作核心类<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
 * 此核心类主要处理：流程通过、驳回、会签、转办、中止、挂起等核心操作<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
 * 
 * <span class="token keyword">@author</span> wangfuwei
 * 
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProcessCoreServiceImpl</span> <span class="token keyword">extends</span> <span class="token class-name">BaseServiceImp</span> <span class="token keyword">implements</span>
		<span class="token class-name">ProcessCoreService</span> <span class="token punctuation">{</span>
	<span class="token keyword">protected</span> <span class="token class-name">RepositoryService</span> repositoryService<span class="token punctuation">;</span>
 
	<span class="token keyword">protected</span> <span class="token class-name">RuntimeService</span> runtimeService<span class="token punctuation">;</span>
 
	<span class="token keyword">protected</span> <span class="token class-name">TaskService</span> taskService<span class="token punctuation">;</span>
 
	<span class="token keyword">protected</span> <span class="token class-name">FormService</span> formService<span class="token punctuation">;</span>
 
	<span class="token keyword">protected</span> <span class="token class-name">HistoryService</span> historyService<span class="token punctuation">;</span>
 
	<span class="token keyword">protected</span> <span class="token class-name">ProcessOtherService</span> processOtherService<span class="token punctuation">;</span>
 
	<span class="token doc-comment comment">/**
	 * 根据当前任务ID，查询可以驳回的任务节点
	 * 
	 * <span class="token keyword">@param</span> <span class="token parameter">taskId</span>
	 *            当前任务ID
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ActivityImpl</span><span class="token punctuation">&gt;</span></span> <span class="token function">findBackAvtivity</span><span class="token punctuation">(</span><span class="token class-name">String</span> taskId<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ActivityImpl</span><span class="token punctuation">&gt;</span></span> rtnList <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>processOtherService<span class="token punctuation">.</span><span class="token function">isJointTask</span><span class="token punctuation">(</span>taskId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// 会签任务节点，不允许驳回</span>
			rtnList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ActivityImpl</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			rtnList <span class="token operator">=</span> <span class="token function">iteratorBackActivity</span><span class="token punctuation">(</span>taskId<span class="token punctuation">,</span> <span class="token function">findActivitiImpl</span><span class="token punctuation">(</span>taskId<span class="token punctuation">,</span>
					<span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ActivityImpl</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
					<span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ActivityImpl</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token function">reverList</span><span class="token punctuation">(</span>rtnList<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
 
	<span class="token doc-comment comment">/**
	 * 审批通过(驳回直接跳回功能需后续扩展)
	 * 
	 * <span class="token keyword">@param</span> <span class="token parameter">taskId</span>
	 *            当前任务ID
	 * <span class="token keyword">@param</span> <span class="token parameter">variables</span>
	 *            流程存储参数
	 * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">Exception</span></span>
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">passProcess</span><span class="token punctuation">(</span><span class="token class-name">String</span> taskId<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> variables<span class="token punctuation">)</span>
			<span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Task</span><span class="token punctuation">&gt;</span></span> tasks <span class="token operator">=</span> taskService<span class="token punctuation">.</span><span class="token function">createTaskQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parentTaskId</span><span class="token punctuation">(</span>taskId<span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">taskDescription</span><span class="token punctuation">(</span><span class="token string">&quot;jointProcess&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Task</span> task <span class="token operator">:</span> tasks<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// 级联结束本节点发起的会签任务</span>
			<span class="token function">commitProcess</span><span class="token punctuation">(</span>task<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token function">commitProcess</span><span class="token punctuation">(</span>taskId<span class="token punctuation">,</span> variables<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
 
	<span class="token doc-comment comment">/**
	 * 驳回流程
	 * 
	 * <span class="token keyword">@param</span> <span class="token parameter">taskId</span>
	 *            当前任务ID
	 * <span class="token keyword">@param</span> <span class="token parameter">activityId</span>
	 *            驳回节点ID
	 * <span class="token keyword">@param</span> <span class="token parameter">variables</span>
	 *            流程存储参数
	 * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">Exception</span></span>
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">backProcess</span><span class="token punctuation">(</span><span class="token class-name">String</span> taskId<span class="token punctuation">,</span> <span class="token class-name">String</span> activityId<span class="token punctuation">,</span>
			<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> variables<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">isNull</span><span class="token punctuation">(</span>activityId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">&quot;驳回目标节点ID为空！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
 
		<span class="token comment">// 查询本节点发起的会签任务，并结束</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Task</span><span class="token punctuation">&gt;</span></span> tasks <span class="token operator">=</span> taskService<span class="token punctuation">.</span><span class="token function">createTaskQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parentTaskId</span><span class="token punctuation">(</span>taskId<span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">taskDescription</span><span class="token punctuation">(</span><span class="token string">&quot;jointProcess&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Task</span> task <span class="token operator">:</span> tasks<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">commitProcess</span><span class="token punctuation">(</span>task<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
 
		<span class="token comment">// 查找所有并行任务节点，同时驳回</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Task</span><span class="token punctuation">&gt;</span></span> taskList <span class="token operator">=</span> <span class="token function">findTaskListByKey</span><span class="token punctuation">(</span><span class="token function">findProcessInstanceByTaskId</span><span class="token punctuation">(</span>
				taskId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">findTaskById</span><span class="token punctuation">(</span>taskId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTaskDefinitionKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Task</span> task <span class="token operator">:</span> taskList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">commitProcess</span><span class="token punctuation">(</span>task<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> variables<span class="token punctuation">,</span> activityId<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
 
	<span class="token doc-comment comment">/**
	 * 取回流程
	 * 
	 * <span class="token keyword">@param</span> <span class="token parameter">taskId</span>
	 *            当前任务ID
	 * <span class="token keyword">@param</span> <span class="token parameter">activityId</span>
	 *            取回节点ID
	 * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">Exception</span></span>
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">callBackProcess</span><span class="token punctuation">(</span><span class="token class-name">String</span> taskId<span class="token punctuation">,</span> <span class="token class-name">String</span> activityId<span class="token punctuation">)</span>
			<span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">isNull</span><span class="token punctuation">(</span>activityId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">&quot;目标节点ID为空！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
 
		<span class="token comment">// 查找所有并行任务节点，同时取回</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Task</span><span class="token punctuation">&gt;</span></span> taskList <span class="token operator">=</span> <span class="token function">findTaskListByKey</span><span class="token punctuation">(</span><span class="token function">findProcessInstanceByTaskId</span><span class="token punctuation">(</span>
				taskId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">findTaskById</span><span class="token punctuation">(</span>taskId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTaskDefinitionKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Task</span> task <span class="token operator">:</span> taskList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">commitProcess</span><span class="token punctuation">(</span>task<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> activityId<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
 
	<span class="token doc-comment comment">/**
	 * 中止流程(特权人直接审批通过等)
	 * 
	 * <span class="token keyword">@param</span> <span class="token parameter">taskId</span>
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">endProcess</span><span class="token punctuation">(</span><span class="token class-name">String</span> taskId<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token class-name">ActivityImpl</span> endActivity <span class="token operator">=</span> <span class="token function">findActivitiImpl</span><span class="token punctuation">(</span>taskId<span class="token punctuation">,</span> <span class="token string">&quot;end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">commitProcess</span><span class="token punctuation">(</span>taskId<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> endActivity<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
 
	<span class="token doc-comment comment">/**
	 * 会签操作
	 * 
	 * <span class="token keyword">@param</span> <span class="token parameter">taskId</span>
	 *            当前任务ID
	 * <span class="token keyword">@param</span> <span class="token parameter">userCodes</span>
	 *            会签人账号集合
	 * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">Exception</span></span>
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jointProcess</span><span class="token punctuation">(</span><span class="token class-name">String</span> taskId<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> userCodes<span class="token punctuation">)</span>
			<span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> userCode <span class="token operator">:</span> userCodes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">TaskEntity</span> task <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TaskEntity</span><span class="token punctuation">)</span> taskService<span class="token punctuation">.</span><span class="token function">newTask</span><span class="token punctuation">(</span><span class="token class-name">IDGenerator</span>
					<span class="token punctuation">.</span><span class="token function">generateID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			task<span class="token punctuation">.</span><span class="token function">setAssignee</span><span class="token punctuation">(</span>userCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
			task<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token function">findTaskById</span><span class="token punctuation">(</span>taskId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;-会签&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			task<span class="token punctuation">.</span><span class="token function">setProcessDefinitionId</span><span class="token punctuation">(</span><span class="token function">findProcessDefinitionEntityByTaskId</span><span class="token punctuation">(</span>
					taskId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			task<span class="token punctuation">.</span><span class="token function">setProcessInstanceId</span><span class="token punctuation">(</span><span class="token function">findProcessInstanceByTaskId</span><span class="token punctuation">(</span>taskId<span class="token punctuation">)</span>
					<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			task<span class="token punctuation">.</span><span class="token function">setParentTaskId</span><span class="token punctuation">(</span>taskId<span class="token punctuation">)</span><span class="token punctuation">;</span>
			task<span class="token punctuation">.</span><span class="token function">setDescription</span><span class="token punctuation">(</span><span class="token string">&quot;jointProcess&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			taskService<span class="token punctuation">.</span><span class="token function">saveTask</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
 
	<span class="token doc-comment comment">/**
	 * 转办流程
	 * 
	 * <span class="token keyword">@param</span> <span class="token parameter">taskId</span>
	 *            当前任务节点ID
	 * <span class="token keyword">@param</span> <span class="token parameter">userCode</span>
	 *            被转办人Code
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">transferAssignee</span><span class="token punctuation">(</span><span class="token class-name">String</span> taskId<span class="token punctuation">,</span> <span class="token class-name">String</span> userCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		taskService<span class="token punctuation">.</span><span class="token function">setAssignee</span><span class="token punctuation">(</span>taskId<span class="token punctuation">,</span> userCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
 
	<span class="token doc-comment comment">/**
	 * ***************************************************************************************************************************************************<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 * ************************************************以下为流程会签操作核心逻辑******************************************************************************<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 * ***************************************************************************************************************************************************<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 */</span>
 
	<span class="token doc-comment comment">/**
	 * ***************************************************************************************************************************************************<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 * ************************************************以上为流程会签操作核心逻辑******************************************************************************<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 * ***************************************************************************************************************************************************<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 */</span>
 
	<span class="token doc-comment comment">/**
	 * ***************************************************************************************************************************************************<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 * ************************************************以下为流程转向操作核心逻辑******************************************************************************<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 * ***************************************************************************************************************************************************<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 */</span>
 
	<span class="token doc-comment comment">/**
	 * <span class="token keyword">@param</span> <span class="token parameter">taskId</span>
	 *            当前任务ID
	 * <span class="token keyword">@param</span> <span class="token parameter">variables</span>
	 *            流程变量
	 * <span class="token keyword">@param</span> <span class="token parameter">activityId</span>
	 *            流程转向执行任务节点ID<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 *            此参数为空，默认为提交操作
	 * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">Exception</span></span>
	 */</span>
	<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">commitProcess</span><span class="token punctuation">(</span><span class="token class-name">String</span> taskId<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> variables<span class="token punctuation">,</span>
			<span class="token class-name">String</span> activityId<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>variables <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			variables <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// 跳转节点为空，默认提交操作</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">isNull</span><span class="token punctuation">(</span>activityId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			taskService<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span>taskId<span class="token punctuation">,</span> variables<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><span class="token comment">// 流程转向操作</span>
			<span class="token function">turnTransition</span><span class="token punctuation">(</span>taskId<span class="token punctuation">,</span> activityId<span class="token punctuation">,</span> variables<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
 
	<span class="token doc-comment comment">/**
	 * 清空指定活动节点流向
	 * 
	 * <span class="token keyword">@param</span> <span class="token parameter">activityImpl</span>
	 *            活动节点
	 * <span class="token keyword">@return</span> 节点流向集合
	 */</span>
	<span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PvmTransition</span><span class="token punctuation">&gt;</span></span> <span class="token function">clearTransition</span><span class="token punctuation">(</span><span class="token class-name">ActivityImpl</span> activityImpl<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// 存储当前节点所有流向临时变量</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PvmTransition</span><span class="token punctuation">&gt;</span></span> oriPvmTransitionList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PvmTransition</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 获取当前节点所有流向，存储到临时变量，然后清空</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PvmTransition</span><span class="token punctuation">&gt;</span></span> pvmTransitionList <span class="token operator">=</span> activityImpl
				<span class="token punctuation">.</span><span class="token function">getOutgoingTransitions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PvmTransition</span> pvmTransition <span class="token operator">:</span> pvmTransitionList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			oriPvmTransitionList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>pvmTransition<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		pvmTransitionList<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
		<span class="token keyword">return</span> oriPvmTransitionList<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
 
	<span class="token doc-comment comment">/**
	 * 还原指定活动节点流向
	 * 
	 * <span class="token keyword">@param</span> <span class="token parameter">activityImpl</span>
	 *            活动节点
	 * <span class="token keyword">@param</span> <span class="token parameter">oriPvmTransitionList</span>
	 *            原有节点流向集合
	 */</span>
	<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">restoreTransition</span><span class="token punctuation">(</span><span class="token class-name">ActivityImpl</span> activityImpl<span class="token punctuation">,</span>
			<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PvmTransition</span><span class="token punctuation">&gt;</span></span> oriPvmTransitionList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// 清空现有流向</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PvmTransition</span><span class="token punctuation">&gt;</span></span> pvmTransitionList <span class="token operator">=</span> activityImpl
				<span class="token punctuation">.</span><span class="token function">getOutgoingTransitions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		pvmTransitionList<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 还原以前流向</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PvmTransition</span> pvmTransition <span class="token operator">:</span> oriPvmTransitionList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			pvmTransitionList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>pvmTransition<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
 
	<span class="token doc-comment comment">/**
	 * 流程转向操作
	 * 
	 * <span class="token keyword">@param</span> <span class="token parameter">taskId</span>
	 *            当前任务ID
	 * <span class="token keyword">@param</span> <span class="token parameter">activityId</span>
	 *            目标节点任务ID
	 * <span class="token keyword">@param</span> <span class="token parameter">variables</span>
	 *            流程变量
	 * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">Exception</span></span>
	 */</span>
	<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">turnTransition</span><span class="token punctuation">(</span><span class="token class-name">String</span> taskId<span class="token punctuation">,</span> <span class="token class-name">String</span> activityId<span class="token punctuation">,</span>
			<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> variables<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token comment">// 当前节点</span>
		<span class="token class-name">ActivityImpl</span> currActivity <span class="token operator">=</span> <span class="token function">findActivitiImpl</span><span class="token punctuation">(</span>taskId<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 清空当前流向</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PvmTransition</span><span class="token punctuation">&gt;</span></span> oriPvmTransitionList <span class="token operator">=</span> <span class="token function">clearTransition</span><span class="token punctuation">(</span>currActivity<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
		<span class="token comment">// 创建新流向</span>
		<span class="token class-name">TransitionImpl</span> newTransition <span class="token operator">=</span> currActivity<span class="token punctuation">.</span><span class="token function">createOutgoingTransition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 目标节点</span>
		<span class="token class-name">ActivityImpl</span> pointActivity <span class="token operator">=</span> <span class="token function">findActivitiImpl</span><span class="token punctuation">(</span>taskId<span class="token punctuation">,</span> activityId<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 设置新流向的目标节点</span>
		newTransition<span class="token punctuation">.</span><span class="token function">setDestination</span><span class="token punctuation">(</span>pointActivity<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
		<span class="token comment">// 执行转向任务</span>
		taskService<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span>taskId<span class="token punctuation">,</span> variables<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 删除目标节点新流入</span>
		pointActivity<span class="token punctuation">.</span><span class="token function">getIncomingTransitions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>newTransition<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
		<span class="token comment">// 还原以前流向</span>
		<span class="token function">restoreTransition</span><span class="token punctuation">(</span>currActivity<span class="token punctuation">,</span> oriPvmTransitionList<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
 
	<span class="token doc-comment comment">/**
	 * ***************************************************************************************************************************************************<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 * ************************************************以上为流程转向操作核心逻辑******************************************************************************<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 * ***************************************************************************************************************************************************<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 */</span>
 
	<span class="token doc-comment comment">/**
	 * ***************************************************************************************************************************************************<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 * ************************************************以下为查询流程驳回节点核心逻辑***************************************************************************<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 * ***************************************************************************************************************************************************<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 */</span>
 
	<span class="token doc-comment comment">/**
	 * 迭代循环流程树结构，查询当前节点可驳回的任务节点
	 * 
	 * <span class="token keyword">@param</span> <span class="token parameter">taskId</span>
	 *            当前任务ID
	 * <span class="token keyword">@param</span> <span class="token parameter">currActivity</span>
	 *            当前活动节点
	 * <span class="token keyword">@param</span> <span class="token parameter">rtnList</span>
	 *            存储回退节点集合
	 * <span class="token keyword">@param</span> <span class="token parameter">tempList</span>
	 *            临时存储节点集合（存储一次迭代过程中的同级userTask节点）
	 * <span class="token keyword">@return</span> 回退节点集合
	 */</span>
	<span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ActivityImpl</span><span class="token punctuation">&gt;</span></span> <span class="token function">iteratorBackActivity</span><span class="token punctuation">(</span><span class="token class-name">String</span> taskId<span class="token punctuation">,</span>
			<span class="token class-name">ActivityImpl</span> currActivity<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ActivityImpl</span><span class="token punctuation">&gt;</span></span> rtnList<span class="token punctuation">,</span>
			<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ActivityImpl</span><span class="token punctuation">&gt;</span></span> tempList<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token comment">// 查询流程定义，生成流程树结构</span>
		<span class="token class-name">ProcessInstance</span> processInstance <span class="token operator">=</span> <span class="token function">findProcessInstanceByTaskId</span><span class="token punctuation">(</span>taskId<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
		<span class="token comment">// 当前节点的流入来源</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PvmTransition</span><span class="token punctuation">&gt;</span></span> incomingTransitions <span class="token operator">=</span> currActivity
				<span class="token punctuation">.</span><span class="token function">getIncomingTransitions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 条件分支节点集合，userTask节点遍历完毕，迭代遍历此集合，查询条件分支对应的userTask节点</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ActivityImpl</span><span class="token punctuation">&gt;</span></span> exclusiveGateways <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ActivityImpl</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 并行节点集合，userTask节点遍历完毕，迭代遍历此集合，查询并行节点对应的userTask节点</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ActivityImpl</span><span class="token punctuation">&gt;</span></span> parallelGateways <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ActivityImpl</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 遍历当前节点所有流入路径</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PvmTransition</span> pvmTransition <span class="token operator">:</span> incomingTransitions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">TransitionImpl</span> transitionImpl <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TransitionImpl</span><span class="token punctuation">)</span> pvmTransition<span class="token punctuation">;</span>
			<span class="token class-name">ActivityImpl</span> activityImpl <span class="token operator">=</span> transitionImpl<span class="token punctuation">.</span><span class="token function">getSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">String</span> type <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> activityImpl<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token doc-comment comment">/**
			 * 并行节点配置要求：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
			 * 必须成对出现，且要求分别配置节点ID为:XXX_start(开始)，XXX_end(结束)
			 */</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;parallelGateway&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// 并行路线</span>
				<span class="token class-name">String</span> gatewayId <span class="token operator">=</span> activityImpl<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token class-name">String</span> gatewayType <span class="token operator">=</span> gatewayId<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>gatewayId
						<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">&quot;_&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;START&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>gatewayType<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// 并行起点，停止递归</span>
					<span class="token keyword">return</span> rtnList<span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><span class="token comment">// 并行终点，临时存储此节点，本次循环结束，迭代集合，查询对应的userTask节点</span>
					parallelGateways<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>activityImpl<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;startEvent&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// 开始节点，停止递归</span>
				<span class="token keyword">return</span> rtnList<span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;userTask&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// 用户任务</span>
				tempList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>activityImpl<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;exclusiveGateway&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// 分支路线，临时存储此节点，本次循环结束，迭代集合，查询对应的userTask节点</span>
				currActivity <span class="token operator">=</span> transitionImpl<span class="token punctuation">.</span><span class="token function">getSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				exclusiveGateways<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>currActivity<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
 
		<span class="token doc-comment comment">/**
		 * 迭代条件分支集合，查询对应的userTask节点
		 */</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ActivityImpl</span> activityImpl <span class="token operator">:</span> exclusiveGateways<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">iteratorBackActivity</span><span class="token punctuation">(</span>taskId<span class="token punctuation">,</span> activityImpl<span class="token punctuation">,</span> rtnList<span class="token punctuation">,</span> tempList<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
 
		<span class="token doc-comment comment">/**
		 * 迭代并行集合，查询对应的userTask节点
		 */</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ActivityImpl</span> activityImpl <span class="token operator">:</span> parallelGateways<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">iteratorBackActivity</span><span class="token punctuation">(</span>taskId<span class="token punctuation">,</span> activityImpl<span class="token punctuation">,</span> rtnList<span class="token punctuation">,</span> tempList<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
 
		<span class="token doc-comment comment">/**
		 * 根据同级userTask集合，过滤最近发生的节点
		 */</span>
		currActivity <span class="token operator">=</span> <span class="token function">filterNewestActivity</span><span class="token punctuation">(</span>processInstance<span class="token punctuation">,</span> tempList<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>currActivity <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// 查询当前节点的流向是否为并行终点，并获取并行起点ID</span>
			<span class="token class-name">String</span> id <span class="token operator">=</span> <span class="token function">findParallelGatewayId</span><span class="token punctuation">(</span>currActivity<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">isNull</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// 并行起点ID为空，此节点流向不是并行终点，符合驳回条件，存储此节点</span>
				rtnList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>currActivity<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><span class="token comment">// 根据并行起点ID查询当前节点，然后迭代查询其对应的userTask任务节点</span>
				currActivity <span class="token operator">=</span> <span class="token function">findActivitiImpl</span><span class="token punctuation">(</span>taskId<span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
 
			<span class="token comment">// 清空本次迭代临时集合</span>
			tempList<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 执行下次迭代</span>
			<span class="token function">iteratorBackActivity</span><span class="token punctuation">(</span>taskId<span class="token punctuation">,</span> currActivity<span class="token punctuation">,</span> rtnList<span class="token punctuation">,</span> tempList<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> rtnList<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
 
	<span class="token doc-comment comment">/**
	 * 反向排序list集合，便于驳回节点按顺序显示
	 * 
	 * <span class="token keyword">@param</span> <span class="token parameter">list</span>
	 * <span class="token keyword">@return</span>
	 */</span>
	<span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ActivityImpl</span><span class="token punctuation">&gt;</span></span> <span class="token function">reverList</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ActivityImpl</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ActivityImpl</span><span class="token punctuation">&gt;</span></span> rtnList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ActivityImpl</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 由于迭代出现重复数据，排除重复</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>rtnList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
				rtnList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> rtnList<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
 
	<span class="token doc-comment comment">/**
	 * 根据当前节点，查询输出流向是否为并行终点，如果为并行终点，则拼装对应的并行起点ID
	 * 
	 * <span class="token keyword">@param</span> <span class="token parameter">activityImpl</span>
	 *            当前节点
	 * <span class="token keyword">@return</span>
	 */</span>
	<span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">findParallelGatewayId</span><span class="token punctuation">(</span><span class="token class-name">ActivityImpl</span> activityImpl<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PvmTransition</span><span class="token punctuation">&gt;</span></span> incomingTransitions <span class="token operator">=</span> activityImpl
				<span class="token punctuation">.</span><span class="token function">getOutgoingTransitions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PvmTransition</span> pvmTransition <span class="token operator">:</span> incomingTransitions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">TransitionImpl</span> transitionImpl <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TransitionImpl</span><span class="token punctuation">)</span> pvmTransition<span class="token punctuation">;</span>
			activityImpl <span class="token operator">=</span> transitionImpl<span class="token punctuation">.</span><span class="token function">getDestination</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">String</span> type <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> activityImpl<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;parallelGateway&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// 并行路线</span>
				<span class="token class-name">String</span> gatewayId <span class="token operator">=</span> activityImpl<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token class-name">String</span> gatewayType <span class="token operator">=</span> gatewayId<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>gatewayId
						<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">&quot;_&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;END&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>gatewayType<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> gatewayId<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> gatewayId<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">&quot;_&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
							<span class="token operator">+</span> <span class="token string">&quot;_start&quot;</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
 
	<span class="token doc-comment comment">/**
	 * 根据流入任务集合，查询最近一次的流入任务节点
	 * 
	 * <span class="token keyword">@param</span> <span class="token parameter">processInstance</span>
	 *            流程实例
	 * <span class="token keyword">@param</span> <span class="token parameter">tempList</span>
	 *            流入任务集合
	 * <span class="token keyword">@return</span>
	 */</span>
	<span class="token keyword">private</span> <span class="token class-name">ActivityImpl</span> <span class="token function">filterNewestActivity</span><span class="token punctuation">(</span><span class="token class-name">ProcessInstance</span> processInstance<span class="token punctuation">,</span>
			<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ActivityImpl</span><span class="token punctuation">&gt;</span></span> tempList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>tempList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">ActivityImpl</span> activity_1 <span class="token operator">=</span> tempList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">HistoricActivityInstance</span> activityInstance_1 <span class="token operator">=</span> <span class="token function">findHistoricUserTask</span><span class="token punctuation">(</span>
					processInstance<span class="token punctuation">,</span> activity_1<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>activityInstance_1 <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				tempList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>activity_1<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">continue</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
 
			<span class="token keyword">if</span> <span class="token punctuation">(</span>tempList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token class-name">ActivityImpl</span> activity_2 <span class="token operator">=</span> tempList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token class-name">HistoricActivityInstance</span> activityInstance_2 <span class="token operator">=</span> <span class="token function">findHistoricUserTask</span><span class="token punctuation">(</span>
						processInstance<span class="token punctuation">,</span> activity_2<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>activityInstance_2 <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					tempList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>activity_2<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">continue</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
 
				<span class="token keyword">if</span> <span class="token punctuation">(</span>activityInstance_1<span class="token punctuation">.</span><span class="token function">getEndTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span>
						activityInstance_2<span class="token punctuation">.</span><span class="token function">getEndTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					tempList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>activity_1<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					tempList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>activity_2<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token keyword">break</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>tempList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> tempList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
 
	<span class="token doc-comment comment">/**
	 * 查询指定任务节点的最新记录
	 * 
	 * <span class="token keyword">@param</span> <span class="token parameter">processInstance</span>
	 *            流程实例
	 * <span class="token keyword">@param</span> <span class="token parameter">activityId</span>
	 * <span class="token keyword">@return</span>
	 */</span>
	<span class="token keyword">private</span> <span class="token class-name">HistoricActivityInstance</span> <span class="token function">findHistoricUserTask</span><span class="token punctuation">(</span>
			<span class="token class-name">ProcessInstance</span> processInstance<span class="token punctuation">,</span> <span class="token class-name">String</span> activityId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">HistoricActivityInstance</span> rtnVal <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token comment">// 查询当前流程实例审批结束的历史节点</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">HistoricActivityInstance</span><span class="token punctuation">&gt;</span></span> historicActivityInstances <span class="token operator">=</span> historyService
				<span class="token punctuation">.</span><span class="token function">createHistoricActivityInstanceQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">activityType</span><span class="token punctuation">(</span><span class="token string">&quot;userTask&quot;</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">processInstanceId</span><span class="token punctuation">(</span>processInstance<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">activityId</span><span class="token punctuation">(</span>
						activityId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">finished</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">orderByHistoricActivityInstanceEndTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">desc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>historicActivityInstances<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			rtnVal <span class="token operator">=</span> historicActivityInstances<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
 
		<span class="token keyword">return</span> rtnVal<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
 
	<span class="token doc-comment comment">/**
	 * *******************************************************************************************************<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 * ********************************以上为查询流程驳回节点核心逻辑***********************************************<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 * ********************************************************************************************************<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 */</span>
 
	<span class="token doc-comment comment">/**
	 * ********************************************************************************<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 * **********************以下为activiti 核心service
	 * set方法***************************<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 * *********************************************************************************<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFormService</span><span class="token punctuation">(</span><span class="token class-name">FormService</span> formService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>formService <span class="token operator">=</span> formService<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
 
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHistoryService</span><span class="token punctuation">(</span><span class="token class-name">HistoryService</span> historyService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>historyService <span class="token operator">=</span> historyService<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
 
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setRepositoryService</span><span class="token punctuation">(</span><span class="token class-name">RepositoryService</span> repositoryService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>repositoryService <span class="token operator">=</span> repositoryService<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
 
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setRuntimeService</span><span class="token punctuation">(</span><span class="token class-name">RuntimeService</span> runtimeService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>runtimeService <span class="token operator">=</span> runtimeService<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
 
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTaskService</span><span class="token punctuation">(</span><span class="token class-name">TaskService</span> taskService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>taskService <span class="token operator">=</span> taskService<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
 
	<span class="token doc-comment comment">/**
	 * ********************************************************************************<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 * **********************以上为activiti 核心service
	 * set方法***************************<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 * *********************************************************************************<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 */</span>
 
	<span class="token doc-comment comment">/**
	 * ********************************************************************************<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 * **********************以下为根据 任务节点ID 获取流程各对象查询方法**********************<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 * *********************************************************************************<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 */</span>
 
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setProcessOtherService</span><span class="token punctuation">(</span><span class="token class-name">ProcessOtherService</span> processOtherService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>processOtherService <span class="token operator">=</span> processOtherService<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
 
	<span class="token doc-comment comment">/**
	 * 根据任务ID获得任务实例
	 * 
	 * <span class="token keyword">@param</span> <span class="token parameter">taskId</span>
	 *            任务ID
	 * <span class="token keyword">@return</span>
	 * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">Exception</span></span>
	 */</span>
	<span class="token keyword">private</span> <span class="token class-name">TaskEntity</span> <span class="token function">findTaskById</span><span class="token punctuation">(</span><span class="token class-name">String</span> taskId<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token class-name">TaskEntity</span> task <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TaskEntity</span><span class="token punctuation">)</span> taskService<span class="token punctuation">.</span><span class="token function">createTaskQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">taskId</span><span class="token punctuation">(</span>
				taskId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">singleResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>task <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">&quot;任务实例未找到!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> task<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
 
	<span class="token doc-comment comment">/**
	 * 根据流程实例ID和任务key值查询所有同级任务集合
	 * 
	 * <span class="token keyword">@param</span> <span class="token parameter">processInstanceId</span>
	 * <span class="token keyword">@param</span> <span class="token parameter">key</span>
	 * <span class="token keyword">@return</span>
	 */</span>
	<span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Task</span><span class="token punctuation">&gt;</span></span> <span class="token function">findTaskListByKey</span><span class="token punctuation">(</span><span class="token class-name">String</span> processInstanceId<span class="token punctuation">,</span> <span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> taskService<span class="token punctuation">.</span><span class="token function">createTaskQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">processInstanceId</span><span class="token punctuation">(</span>
				processInstanceId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">taskDefinitionKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
 
	<span class="token doc-comment comment">/**
	 * 根据任务ID获取对应的流程实例
	 * 
	 * <span class="token keyword">@param</span> <span class="token parameter">taskId</span>
	 *            任务ID
	 * <span class="token keyword">@return</span>
	 * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">Exception</span></span>
	 */</span>
	<span class="token keyword">private</span> <span class="token class-name">ProcessInstance</span> <span class="token function">findProcessInstanceByTaskId</span><span class="token punctuation">(</span><span class="token class-name">String</span> taskId<span class="token punctuation">)</span>
			<span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token comment">// 找到流程实例</span>
		<span class="token class-name">ProcessInstance</span> processInstance <span class="token operator">=</span> runtimeService
				<span class="token punctuation">.</span><span class="token function">createProcessInstanceQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">processInstanceId</span><span class="token punctuation">(</span>
						<span class="token function">findTaskById</span><span class="token punctuation">(</span>taskId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getProcessInstanceId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">singleResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>processInstance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">&quot;流程实例未找到!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> processInstance<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
 
	<span class="token doc-comment comment">/**
	 * 根据任务ID获取流程定义
	 * 
	 * <span class="token keyword">@param</span> <span class="token parameter">taskId</span>
	 *            任务ID
	 * <span class="token keyword">@return</span>
	 * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">Exception</span></span>
	 */</span>
	<span class="token keyword">private</span> <span class="token class-name">ProcessDefinitionEntity</span> <span class="token function">findProcessDefinitionEntityByTaskId</span><span class="token punctuation">(</span>
			<span class="token class-name">String</span> taskId<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token comment">// 取得流程定义</span>
		<span class="token class-name">ProcessDefinitionEntity</span> processDefinition <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ProcessDefinitionEntity</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">RepositoryServiceImpl</span><span class="token punctuation">)</span> repositoryService<span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">getDeployedProcessDefinition</span><span class="token punctuation">(</span><span class="token function">findTaskById</span><span class="token punctuation">(</span>taskId<span class="token punctuation">)</span>
						<span class="token punctuation">.</span><span class="token function">getProcessDefinitionId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
		<span class="token keyword">if</span> <span class="token punctuation">(</span>processDefinition <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">&quot;流程定义未找到!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
 
		<span class="token keyword">return</span> processDefinition<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
 
	<span class="token doc-comment comment">/**
	 * 根据任务ID和节点ID获取活动节点 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 * 
	 * <span class="token keyword">@param</span> <span class="token parameter">taskId</span>
	 *            任务ID
	 * <span class="token keyword">@param</span> <span class="token parameter">activityId</span>
	 *            活动节点ID <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 *            如果为null或&quot;&quot;，则默认查询当前活动节点 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 *            如果为&quot;end&quot;，则查询结束节点 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 * 
	 * <span class="token keyword">@return</span>
	 * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">Exception</span></span>
	 */</span>
	<span class="token keyword">private</span> <span class="token class-name">ActivityImpl</span> <span class="token function">findActivitiImpl</span><span class="token punctuation">(</span><span class="token class-name">String</span> taskId<span class="token punctuation">,</span> <span class="token class-name">String</span> activityId<span class="token punctuation">)</span>
			<span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token comment">// 取得流程定义</span>
		<span class="token class-name">ProcessDefinitionEntity</span> processDefinition <span class="token operator">=</span> <span class="token function">findProcessDefinitionEntityByTaskId</span><span class="token punctuation">(</span>taskId<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
		<span class="token comment">// 获取当前活动节点ID</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">isNull</span><span class="token punctuation">(</span>activityId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			activityId <span class="token operator">=</span> <span class="token function">findTaskById</span><span class="token punctuation">(</span>taskId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTaskDefinitionKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
 
		<span class="token comment">// 根据流程定义，获取该流程实例的结束节点</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>activityId<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;END&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ActivityImpl</span> activityImpl <span class="token operator">:</span> processDefinition<span class="token punctuation">.</span><span class="token function">getActivities</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PvmTransition</span><span class="token punctuation">&gt;</span></span> pvmTransitionList <span class="token operator">=</span> activityImpl
						<span class="token punctuation">.</span><span class="token function">getOutgoingTransitions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>pvmTransitionList<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> activityImpl<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
 
		<span class="token comment">// 根据节点ID，获取对应的活动节点</span>
		<span class="token class-name">ActivityImpl</span> activityImpl <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">ProcessDefinitionImpl</span><span class="token punctuation">)</span> processDefinition<span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">findActivity</span><span class="token punctuation">(</span>activityId<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
		<span class="token keyword">return</span> activityImpl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
 
	<span class="token doc-comment comment">/**
	 * ********************************************************************************<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 * **********************以上为根据 任务节点ID 获取流程各对象查询方法**********************<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 * *********************************************************************************<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	 */</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br><span class="line-number">262</span><br><span class="line-number">263</span><br><span class="line-number">264</span><br><span class="line-number">265</span><br><span class="line-number">266</span><br><span class="line-number">267</span><br><span class="line-number">268</span><br><span class="line-number">269</span><br><span class="line-number">270</span><br><span class="line-number">271</span><br><span class="line-number">272</span><br><span class="line-number">273</span><br><span class="line-number">274</span><br><span class="line-number">275</span><br><span class="line-number">276</span><br><span class="line-number">277</span><br><span class="line-number">278</span><br><span class="line-number">279</span><br><span class="line-number">280</span><br><span class="line-number">281</span><br><span class="line-number">282</span><br><span class="line-number">283</span><br><span class="line-number">284</span><br><span class="line-number">285</span><br><span class="line-number">286</span><br><span class="line-number">287</span><br><span class="line-number">288</span><br><span class="line-number">289</span><br><span class="line-number">290</span><br><span class="line-number">291</span><br><span class="line-number">292</span><br><span class="line-number">293</span><br><span class="line-number">294</span><br><span class="line-number">295</span><br><span class="line-number">296</span><br><span class="line-number">297</span><br><span class="line-number">298</span><br><span class="line-number">299</span><br><span class="line-number">300</span><br><span class="line-number">301</span><br><span class="line-number">302</span><br><span class="line-number">303</span><br><span class="line-number">304</span><br><span class="line-number">305</span><br><span class="line-number">306</span><br><span class="line-number">307</span><br><span class="line-number">308</span><br><span class="line-number">309</span><br><span class="line-number">310</span><br><span class="line-number">311</span><br><span class="line-number">312</span><br><span class="line-number">313</span><br><span class="line-number">314</span><br><span class="line-number">315</span><br><span class="line-number">316</span><br><span class="line-number">317</span><br><span class="line-number">318</span><br><span class="line-number">319</span><br><span class="line-number">320</span><br><span class="line-number">321</span><br><span class="line-number">322</span><br><span class="line-number">323</span><br><span class="line-number">324</span><br><span class="line-number">325</span><br><span class="line-number">326</span><br><span class="line-number">327</span><br><span class="line-number">328</span><br><span class="line-number">329</span><br><span class="line-number">330</span><br><span class="line-number">331</span><br><span class="line-number">332</span><br><span class="line-number">333</span><br><span class="line-number">334</span><br><span class="line-number">335</span><br><span class="line-number">336</span><br><span class="line-number">337</span><br><span class="line-number">338</span><br><span class="line-number">339</span><br><span class="line-number">340</span><br><span class="line-number">341</span><br><span class="line-number">342</span><br><span class="line-number">343</span><br><span class="line-number">344</span><br><span class="line-number">345</span><br><span class="line-number">346</span><br><span class="line-number">347</span><br><span class="line-number">348</span><br><span class="line-number">349</span><br><span class="line-number">350</span><br><span class="line-number">351</span><br><span class="line-number">352</span><br><span class="line-number">353</span><br><span class="line-number">354</span><br><span class="line-number">355</span><br><span class="line-number">356</span><br><span class="line-number">357</span><br><span class="line-number">358</span><br><span class="line-number">359</span><br><span class="line-number">360</span><br><span class="line-number">361</span><br><span class="line-number">362</span><br><span class="line-number">363</span><br><span class="line-number">364</span><br><span class="line-number">365</span><br><span class="line-number">366</span><br><span class="line-number">367</span><br><span class="line-number">368</span><br><span class="line-number">369</span><br><span class="line-number">370</span><br><span class="line-number">371</span><br><span class="line-number">372</span><br><span class="line-number">373</span><br><span class="line-number">374</span><br><span class="line-number">375</span><br><span class="line-number">376</span><br><span class="line-number">377</span><br><span class="line-number">378</span><br><span class="line-number">379</span><br><span class="line-number">380</span><br><span class="line-number">381</span><br><span class="line-number">382</span><br><span class="line-number">383</span><br><span class="line-number">384</span><br><span class="line-number">385</span><br><span class="line-number">386</span><br><span class="line-number">387</span><br><span class="line-number">388</span><br><span class="line-number">389</span><br><span class="line-number">390</span><br><span class="line-number">391</span><br><span class="line-number">392</span><br><span class="line-number">393</span><br><span class="line-number">394</span><br><span class="line-number">395</span><br><span class="line-number">396</span><br><span class="line-number">397</span><br><span class="line-number">398</span><br><span class="line-number">399</span><br><span class="line-number">400</span><br><span class="line-number">401</span><br><span class="line-number">402</span><br><span class="line-number">403</span><br><span class="line-number">404</span><br><span class="line-number">405</span><br><span class="line-number">406</span><br><span class="line-number">407</span><br><span class="line-number">408</span><br><span class="line-number">409</span><br><span class="line-number">410</span><br><span class="line-number">411</span><br><span class="line-number">412</span><br><span class="line-number">413</span><br><span class="line-number">414</span><br><span class="line-number">415</span><br><span class="line-number">416</span><br><span class="line-number">417</span><br><span class="line-number">418</span><br><span class="line-number">419</span><br><span class="line-number">420</span><br><span class="line-number">421</span><br><span class="line-number">422</span><br><span class="line-number">423</span><br><span class="line-number">424</span><br><span class="line-number">425</span><br><span class="line-number">426</span><br><span class="line-number">427</span><br><span class="line-number">428</span><br><span class="line-number">429</span><br><span class="line-number">430</span><br><span class="line-number">431</span><br><span class="line-number">432</span><br><span class="line-number">433</span><br><span class="line-number">434</span><br><span class="line-number">435</span><br><span class="line-number">436</span><br><span class="line-number">437</span><br><span class="line-number">438</span><br><span class="line-number">439</span><br><span class="line-number">440</span><br><span class="line-number">441</span><br><span class="line-number">442</span><br><span class="line-number">443</span><br><span class="line-number">444</span><br><span class="line-number">445</span><br><span class="line-number">446</span><br><span class="line-number">447</span><br><span class="line-number">448</span><br><span class="line-number">449</span><br><span class="line-number">450</span><br><span class="line-number">451</span><br><span class="line-number">452</span><br><span class="line-number">453</span><br><span class="line-number">454</span><br><span class="line-number">455</span><br><span class="line-number">456</span><br><span class="line-number">457</span><br><span class="line-number">458</span><br><span class="line-number">459</span><br><span class="line-number">460</span><br><span class="line-number">461</span><br><span class="line-number">462</span><br><span class="line-number">463</span><br><span class="line-number">464</span><br><span class="line-number">465</span><br><span class="line-number">466</span><br><span class="line-number">467</span><br><span class="line-number">468</span><br><span class="line-number">469</span><br><span class="line-number">470</span><br><span class="line-number">471</span><br><span class="line-number">472</span><br><span class="line-number">473</span><br><span class="line-number">474</span><br><span class="line-number">475</span><br><span class="line-number">476</span><br><span class="line-number">477</span><br><span class="line-number">478</span><br><span class="line-number">479</span><br><span class="line-number">480</span><br><span class="line-number">481</span><br><span class="line-number">482</span><br><span class="line-number">483</span><br><span class="line-number">484</span><br><span class="line-number">485</span><br><span class="line-number">486</span><br><span class="line-number">487</span><br><span class="line-number">488</span><br><span class="line-number">489</span><br><span class="line-number">490</span><br><span class="line-number">491</span><br><span class="line-number">492</span><br><span class="line-number">493</span><br><span class="line-number">494</span><br><span class="line-number">495</span><br><span class="line-number">496</span><br><span class="line-number">497</span><br><span class="line-number">498</span><br><span class="line-number">499</span><br><span class="line-number">500</span><br><span class="line-number">501</span><br><span class="line-number">502</span><br><span class="line-number">503</span><br><span class="line-number">504</span><br><span class="line-number">505</span><br><span class="line-number">506</span><br><span class="line-number">507</span><br><span class="line-number">508</span><br><span class="line-number">509</span><br><span class="line-number">510</span><br><span class="line-number">511</span><br><span class="line-number">512</span><br><span class="line-number">513</span><br><span class="line-number">514</span><br><span class="line-number">515</span><br><span class="line-number">516</span><br><span class="line-number">517</span><br><span class="line-number">518</span><br><span class="line-number">519</span><br><span class="line-number">520</span><br><span class="line-number">521</span><br><span class="line-number">522</span><br><span class="line-number">523</span><br><span class="line-number">524</span><br><span class="line-number">525</span><br><span class="line-number">526</span><br><span class="line-number">527</span><br><span class="line-number">528</span><br><span class="line-number">529</span><br><span class="line-number">530</span><br><span class="line-number">531</span><br><span class="line-number">532</span><br><span class="line-number">533</span><br><span class="line-number">534</span><br><span class="line-number">535</span><br><span class="line-number">536</span><br><span class="line-number">537</span><br><span class="line-number">538</span><br><span class="line-number">539</span><br><span class="line-number">540</span><br><span class="line-number">541</span><br><span class="line-number">542</span><br><span class="line-number">543</span><br><span class="line-number">544</span><br><span class="line-number">545</span><br><span class="line-number">546</span><br><span class="line-number">547</span><br><span class="line-number">548</span><br><span class="line-number">549</span><br><span class="line-number">550</span><br><span class="line-number">551</span><br><span class="line-number">552</span><br><span class="line-number">553</span><br><span class="line-number">554</span><br><span class="line-number">555</span><br><span class="line-number">556</span><br><span class="line-number">557</span><br><span class="line-number">558</span><br><span class="line-number">559</span><br><span class="line-number">560</span><br><span class="line-number">561</span><br><span class="line-number">562</span><br><span class="line-number">563</span><br><span class="line-number">564</span><br><span class="line-number">565</span><br><span class="line-number">566</span><br><span class="line-number">567</span><br><span class="line-number">568</span><br><span class="line-number">569</span><br><span class="line-number">570</span><br><span class="line-number">571</span><br><span class="line-number">572</span><br><span class="line-number">573</span><br><span class="line-number">574</span><br><span class="line-number">575</span><br><span class="line-number">576</span><br><span class="line-number">577</span><br><span class="line-number">578</span><br><span class="line-number">579</span><br><span class="line-number">580</span><br><span class="line-number">581</span><br><span class="line-number">582</span><br><span class="line-number">583</span><br><span class="line-number">584</span><br><span class="line-number">585</span><br><span class="line-number">586</span><br><span class="line-number">587</span><br><span class="line-number">588</span><br><span class="line-number">589</span><br><span class="line-number">590</span><br><span class="line-number">591</span><br><span class="line-number">592</span><br><span class="line-number">593</span><br><span class="line-number">594</span><br><span class="line-number">595</span><br><span class="line-number">596</span><br><span class="line-number">597</span><br><span class="line-number">598</span><br><span class="line-number">599</span><br><span class="line-number">600</span><br><span class="line-number">601</span><br><span class="line-number">602</span><br><span class="line-number">603</span><br><span class="line-number">604</span><br><span class="line-number">605</span><br><span class="line-number">606</span><br><span class="line-number">607</span><br><span class="line-number">608</span><br><span class="line-number">609</span><br><span class="line-number">610</span><br><span class="line-number">611</span><br><span class="line-number">612</span><br><span class="line-number">613</span><br><span class="line-number">614</span><br><span class="line-number">615</span><br><span class="line-number">616</span><br><span class="line-number">617</span><br><span class="line-number">618</span><br><span class="line-number">619</span><br><span class="line-number">620</span><br><span class="line-number">621</span><br><span class="line-number">622</span><br><span class="line-number">623</span><br><span class="line-number">624</span><br><span class="line-number">625</span><br><span class="line-number">626</span><br><span class="line-number">627</span><br><span class="line-number">628</span><br><span class="line-number">629</span><br><span class="line-number">630</span><br><span class="line-number">631</span><br><span class="line-number">632</span><br><span class="line-number">633</span><br><span class="line-number">634</span><br><span class="line-number">635</span><br><span class="line-number">636</span><br><span class="line-number">637</span><br><span class="line-number">638</span><br><span class="line-number">639</span><br><span class="line-number">640</span><br><span class="line-number">641</span><br><span class="line-number">642</span><br><span class="line-number">643</span><br><span class="line-number">644</span><br><span class="line-number">645</span><br><span class="line-number">646</span><br><span class="line-number">647</span><br><span class="line-number">648</span><br><span class="line-number">649</span><br><span class="line-number">650</span><br><span class="line-number">651</span><br><span class="line-number">652</span><br><span class="line-number">653</span><br><span class="line-number">654</span><br><span class="line-number">655</span><br><span class="line-number">656</span><br><span class="line-number">657</span><br><span class="line-number">658</span><br><span class="line-number">659</span><br><span class="line-number">660</span><br><span class="line-number">661</span><br><span class="line-number">662</span><br><span class="line-number">663</span><br><span class="line-number">664</span><br><span class="line-number">665</span><br><span class="line-number">666</span><br><span class="line-number">667</span><br><span class="line-number">668</span><br><span class="line-number">669</span><br><span class="line-number">670</span><br><span class="line-number">671</span><br><span class="line-number">672</span><br><span class="line-number">673</span><br><span class="line-number">674</span><br><span class="line-number">675</span><br><span class="line-number">676</span><br><span class="line-number">677</span><br><span class="line-number">678</span><br><span class="line-number">679</span><br><span class="line-number">680</span><br><span class="line-number">681</span><br><span class="line-number">682</span><br><span class="line-number">683</span><br><span class="line-number">684</span><br><span class="line-number">685</span><br><span class="line-number">686</span><br><span class="line-number">687</span><br></div></div><!--]--></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/coderzsj/blog/edit/dev/docs/java/activiti/activiti知识汇总.md" rel="noopener noreferrer" target="_blank" arialabel="编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" arialabelledby="edit"><title id="edit" lang="en">edit icon</title><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]-->编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">上次编辑于: </span><span class="info">2022/5/19 18:22:17</span></div><div class="meta-item contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: 945892500@qq.com">zhangshijing</span><!--]--><!--]--></div></footer><!----><!----><!----></main><!--]--><footer class="footer-wrapper"><div class="footer"><a href="https://beian.miit.gov.cn/" target="_blank">晋ICP备2021007439号</a></div><div class="copyright">Copyright © 2022 shijing</div></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/blog/assets/app.9da19d67.js" defer></script>
  </body>
</html>
