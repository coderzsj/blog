(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{649:function(e,s,t){"use strict";t.r(s);var n=t(1),r=Object(n.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[e._v("PHp工程师执行redis keys *导致数据库宕机！")]),e._v(" "),t("p",[e._v("keys * wxdb（此处省略）cf8*")]),e._v(" "),t("p",[e._v("这样的命令，导致Redis锁住，导致CPU飙升，引起所有支付链路卡住，等十几秒结束后，所有的请求流量全部挤压到了RDS数据库中，使数据库产生了雪崩效应发生了宕机事件。")]),e._v(" "),t("p",[e._v("时间复杂度为O(N)的命令，都要慎重，不要在生产上随便使用。例如：hgetall、lrange、smembers、zrange、sinter等命令，")]),e._v(" "),t("p",[e._v("Redis2.8版本以后有了一个新命令"),t("code",[e._v("scan")]),e._v("，可以用来分批次扫描"),t("code",[e._v("redis")]),e._v("记录，这样肯定会导致整个查询消耗的总时间变大，但不会影响redis服务卡顿，影响服务使用。")]),e._v(" "),t("p",[e._v("encryption")])])}),[],!1,null,null,null);s.default=r.exports}}]);